{"version":3,"sources":["src/js/include/plugin/jquery.fancybox.min.js","src/js/include/plugin/jquery.lazyload.min.js"],"names":["window","document","$","undefined","fn","fancybox","console","log","defaults","loop","margin","gutter","keyboard","arrows","infobar","toolbar","buttons","idleTime","smallBtn","protect","modal","image","preload","ajax","settings","data","iframe","tpl","css","attr","scrolling","defaultType","animationEffect","animationDuration","zoomOpacity","transitionEffect","transitionDuration","slideClass","baseClass","baseTpl","spinnerTpl","errorTpl","btnTpl","download","zoom","close","arrowLeft","arrowRight","parentEl","autoFocus","backFocus","trapFocus","fullScreen","autoStart","touch","vertical","momentum","hash","media","slideShow","speed","thumbs","hideOnClose","axis","wheel","onInit","noop","beforeLoad","afterLoad","beforeShow","afterShow","beforeClose","afterClose","onActivate","onDeactivate","clickContent","current","event","type","clickSlide","clickOutside","dblclickContent","dblclickSlide","dblclickOutside","mobile","lang","i18n","CLOSE","NEXT","PREV","ERROR","PLAY_START","PLAY_STOP","FULL_SCREEN","THUMBS","DOWNLOAD","SHARE","ZOOM","$W","$D","called","isQuery","obj","hasOwnProperty","requestAFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","setTimeout","transitionEnd","t","el","createElement","transitions","style","forceRedraw","$el","length","offsetHeight","FancyBox","content","opts","index","self","extend","isMobile","isArray","id","group","currIndex","parseInt","prevIndex","prevPos","currPos","firstRun","createGroup","$lastFocus","activeElement","blur","slides","init","prototype","firstItem","firstItemOpts","scrollbarWidth","$scrollDiv","$container","buttonStr","scrollTop","scrollLeft","getInstance","addClass","test","navigator","userAgent","MSStream","body","scrollHeight","innerHeight","appendTo","offsetWidth","clientWidth","remove","append","each","value","translate","replace","$refs","container","forEach","item","find","trigger","activate","jumpTo","str","arr","match","n","items","makeArray","i","$item","src","srcParts","isPlainObject","options","$orig","charAt","$thumb","caption","apply","split","shift","filter","inArray","push","addEvents","removeEvents","on","e","stopPropagation","preventDefault","previous","next","isScaledDown","originalEvent","update","stage","hide","show","instance","isClosing","target","hasClass","is","has","focus","keycode","keyCode","which","idleSecondsCounter","isIdle","showControls","idleInterval","setInterval","isDragging","hideControls","off","clearInterval","duration","pos","slide","canvasWidth","currentPos","transitionProps","groupLen","isAnimating","createSlide","updateControls","getTranslate","$slide","isMoved","left","top","forcedDuration","isNumeric","removeClass","loadSlide","stop","Math","round","width","animate","removeAttr","complete","children","isLoaded","revealContent","isComplete","updateSlide","scaleToActual","x","y","$what","$content","imgPos","posX","posY","scaleX","scaleY","canvasHeight","height","newImgWidth","newImgHeight","hasError","updateCursor","SlideShow","isActive","scaleToFit","end","getFitPos","imgWidth","imgHeight","minRatio","min","floor","key","setTranslate","nextWidth","nextHeight","isZoomable","fitPos","isFunction","rez","canPan","abs","ajaxLoad","isLoading","setImage","setIframe","setContent","setError","showLoading","url","success","textStatus","error","jqXHR","one","abort","srcset","found","temp","pxRatio","windowWidth","devicePixelRatio","innerWidth","map","ret","trim","substring","postfix","sort","a","b","j","thumb","$ghost","setBigImage","$img","$image","clearTimeout","timouts","naturalWidth","naturalHeight","hideLoading","max","readyState","$iframe","Date","getTime","isReady","$wrap","frameWidth","frameHeight","scrollWidth","$contents","$body","contents","ignore","contentWindow","documentElement","ceil","outerWidth","outerHeight","prepend","empty","parent","$placeholder","insertAfter","nodeType","html","pause","after","$smallBtn","$spinner","first","button","effect","effectClassName","opacity","start","getThumbPos","isElementVisible","element","elementRect","getBoundingClientRect","parentRects","visibleInAllParents","parentElement","every","parentRect","visiblePixelX","right","visiblePixelY","bottom","thumbPos","offset","slidePos","ownerDocument","parseFloat","siblings","play","prev","isVisible","d","done","cleanUp","name","args","Array","slice","call","arguments","unshift","force","$caption","isHiddenControls","prop","toggleClass","toggleControls","version","command","open","all","destroy","createTouch","use3d","div","getComputedStyle","getPropertyValue","documentMode","matrix","eq","indexOf","transRegex","transRez","exec","props","position","transform","to","leaveAnimationName","propertyName","_run","$target","currentTarget","isDefaultPrevented","selector","jQuery","format","params","param","youtube","matcher","autoplay","autohide","fs","rel","hd","wmode","enablejsapi","html5","paramPlace","vimeo","show_title","show_byline","show_portrait","fullscreen","api","metacafe","dailymotion","additionalInfos","vine","instagram","gmap_place","gmap_search","urlParams","paramObj","provider","providerName","providerOpts","m","p","decodeURIComponent","contentProvider","cancelAFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","pointers","result","touches","changedTouches","pageX","pageY","clientX","clientY","distance","point2","point1","what","sqrt","pow","isClickable","get","onclick","atts","attributes","nodeName","substr","hasScrollbars","overflowY","overflowX","clientHeight","horizontal","isScrollable","Guestures","$bg","bg","$stage","proxy","ontouchstart","isTouchDevice","startPoints","canTap","startTime","distanceX","distanceY","isPanning","isSwiping","isZooming","sliderStartPos","sliderLastPos","contentStartPos","contentLastPos","centerPointStartX","centerPointStartY","percentageOfImageAtPinchPointX","percentageOfImageAtPinchPointY","startDistanceBetweenFingers","ontouchmove","newPoints","tapped","onSwipe","onPan","onZoom","swiping","angle","atan2","PI","inTransition","requestId","newOffsetX","newOffsetY","newPos","limitMovement","newWidth","newHeight","minTranslateX","minTranslateY","maxTranslateX","maxTranslateY","currentOffsetX","currentOffsetY","limitPosition","currentWidth","currentHeight","endDistanceBetweenFingers","pinchRatio","translateFromZoomingX","translateFromZoomingY","centerPointEndX","centerPointEndY","translateFromTranslatingX","translateFromTranslatingY","ontouchend","dMs","panning","zooming","endPoints","onTap","velocityX","velocityY","speedX","endPanning","endZooming","endSwiping","reset","tapX","tapY","where","process","prefix","action","startEvent","timer","$button","toggle","set","clear","keypress","hidden","fnMap","val","FullScreen","request","elem","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","isFullscreen","Boolean","fullscreenElement","enabled","fullscreenEnabled","fullscreenchange","FancyThumbs","$grid","$list","Thumbs","second","create","list","addBack","$parent","thumbWidth","thumbHeight","widthRatio","heightRatio","share","escapeHtml","string","entityMap","String","s","f","location","encodeURIComponent","text","escapeSelector","sel","rcssescape","fcssescape","ch","asCodePoint","charCodeAt","toString","shouldCreateHistory","currentHash","timerID","parseUrl","pop","gallery","join","triggerFromUrl","getGalleryID","origHash","history","title","pathname","search","replaceState","prevTime","currTime","delta","isHorizontal","isVertical","wheelDelta","deltaY","detail","wheelDeltaX","deltaX","c","lazyload","g","skip_invisible","abovethetop","leftofbegin","belowthefold","rightoffold","failure_limit","h","threshold","data_attribute","appear","load","placeholder","failurelimit","effectspeed","effect_speed","bind","loaded","grep","appVersion","persisted","ready","inviewport","expr"],"mappings":"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","file":"../../js/plugins.js","sourcesContent":["// ==================================================\r\n// fancyBox v3.2.8\r\n//\r\n// Licensed GPLv3 for open source use\r\n// or fancyBox Commercial License for commercial use\r\n//\r\n// http://fancyapps.com/fancybox/\r\n// Copyright 2017 fancyApps\r\n//\r\n// ==================================================\r\n;(function (window, document, $, undefined) {\r\n    'use strict';\r\n\r\n    // If there's no jQuery, fancyBox can't work\r\n    // =========================================\r\n\r\n    if ( !$ ) {\r\n        return;\r\n    }\r\n\r\n    // Check if fancyBox is already initialized\r\n    // ========================================\r\n\r\n    if ( $.fn.fancybox ) {\r\n\r\n        if ( 'console' in window ) {\r\n            console.log( 'fancyBox already initialized' );\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    // Private default settings\r\n    // ========================\r\n\r\n    var defaults = {\r\n\r\n        // Enable infinite gallery navigation\r\n        loop : false,\r\n\r\n        // Space around image, ignored if zoomed-in or viewport width is smaller than 800px\r\n        margin : [44, 0],\r\n\r\n        // Horizontal space between slides\r\n        gutter : 50,\r\n\r\n        // Enable keyboard navigation\r\n        keyboard : true,\r\n\r\n        // Should display navigation arrows at the screen edges\r\n        arrows : true,\r\n\r\n        // Should display infobar (counter and arrows at the top)\r\n        infobar : true,\r\n\r\n        // Should display toolbar (buttons at the top)\r\n        toolbar : true,\r\n\r\n        // What buttons should appear in the top right corner.\r\n        // Buttons will be created using templates from `btnTpl` option\r\n        // and they will be placed into toolbar (class=\"fancybox-toolbar\"` element)\r\n        buttons : [\r\n            'slideShow',\r\n            'fullScreen',\r\n            'thumbs',\r\n            'share',\r\n            //'download',\r\n            //'zoom',\r\n            'close'\r\n        ],\r\n\r\n        // Detect \"idle\" time in seconds\r\n        idleTime : 3,\r\n\r\n        // Should display buttons at top right corner of the content\r\n        // If 'auto' - they will be created for content having type 'html', 'inline' or 'ajax'\r\n        // Use template from `btnTpl.smallBtn` for customization\r\n        smallBtn : 'auto',\r\n\r\n        // Disable right-click and use simple image protection for images\r\n        protect : false,\r\n\r\n        // Shortcut to make content \"modal\" - disable keyboard navigtion, hide buttons, etc\r\n        modal : false,\r\n\r\n        image : {\r\n\r\n            // Wait for images to load before displaying\r\n            // Requires predefined image dimensions\r\n            // If 'auto' - will zoom in thumbnail if 'width' and 'height' attributes are found\r\n            preload : \"auto\"\r\n\r\n        },\r\n\r\n        ajax : {\r\n\r\n            // Object containing settings for ajax request\r\n            settings : {\r\n\r\n                // This helps to indicate that request comes from the modal\r\n                // Feel free to change naming\r\n                data : {\r\n                    fancybox : true\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        iframe : {\r\n\r\n            // Iframe template\r\n            tpl : '<iframe id=\"fancybox-frame{rnd}\" name=\"fancybox-frame{rnd}\" class=\"fancybox-iframe\" frameborder=\"0\" vspace=\"0\" hspace=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen allowtransparency=\"true\" src=\"\"></iframe>',\r\n\r\n            // Preload iframe before displaying it\r\n            // This allows to calculate iframe content width and height\r\n            // (note: Due to \"Same Origin Policy\", you can't get cross domain data).\r\n            preload : true,\r\n\r\n            // Custom CSS styling for iframe wrapping element\r\n            // You can use this to set custom iframe dimensions\r\n            css : {},\r\n\r\n            // Iframe tag attributes\r\n            attr : {\r\n                scrolling : 'auto'\r\n            }\r\n\r\n        },\r\n\r\n        // Default content type if cannot be detected automatically\r\n        defaultType : 'image',\r\n\r\n        // Open/close animation type\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"zoom\"           - zoom images from/to thumbnail\r\n        //   \"fade\"\r\n        //   \"zoom-in-out\"\r\n        //\r\n        animationEffect : \"zoom\",\r\n\r\n        // Duration in ms for open/close animation\r\n        animationDuration : 500,\r\n\r\n        // Should image change opacity while zooming\r\n        // If opacity is \"auto\", then opacity will be changed if image and thumbnail have different aspect ratios\r\n        zoomOpacity : \"auto\",\r\n\r\n        // Transition effect between slides\r\n        //\r\n        // Possible values:\r\n        //   false            - disable\r\n        //   \"fade'\r\n        //   \"slide'\r\n        //   \"circular'\r\n        //   \"tube'\r\n        //   \"zoom-in-out'\r\n        //   \"rotate'\r\n        //\r\n        transitionEffect : \"fade\",\r\n\r\n        // Duration in ms for transition animation\r\n        transitionDuration : 366,\r\n\r\n        // Custom CSS class for slide element\r\n        slideClass : '',\r\n\r\n        // Custom CSS class for layout\r\n        baseClass : '',\r\n\r\n        // Base template for layout\r\n        baseTpl\t:\r\n            '<div class=\"fancybox-container\" role=\"dialog\" tabindex=\"-1\">' +\r\n                '<div class=\"fancybox-bg\"></div>' +\r\n                '<div class=\"fancybox-inner\">' +\r\n                    '<div class=\"fancybox-infobar\">' +\r\n                        '<span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"fancybox-toolbar\">{{buttons}}</div>' +\r\n                    '<div class=\"fancybox-navigation\">{{arrows}}</div>' +\r\n                    '<div class=\"fancybox-stage\"></div>' +\r\n                    '<div class=\"fancybox-caption-wrap\"><div class=\"fancybox-caption\"></div></div>' +\r\n                '</div>' +\r\n            '</div>',\r\n\r\n        // Loading indicator template\r\n        spinnerTpl : '<div class=\"fancybox-loading\"></div>',\r\n\r\n        // Error message template\r\n        errorTpl : '<div class=\"fancybox-error\"><p>{{ERROR}}<p></div>',\r\n\r\n        btnTpl : {\r\n\r\n            download : '<a download data-fancybox-download class=\"fancybox-button fancybox-button--download\" title=\"{{DOWNLOAD}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M20,23 L20,8 L20,23 L13,16 L20,23 L27,16 L20,23 M26,28 L13,28 L27,28 L14,28\" />' +\r\n                        '</svg>' +\r\n                    '</a>',\r\n\r\n            zoom : '<button data-fancybox-zoom class=\"fancybox-button fancybox-button--zoom\" title=\"{{ZOOM}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M 18,17 m-8,0 a 8,8 0 1,0 16,0 a 8,8 0 1,0 -16,0 M25,23 L31,29 L25,23\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            close : '<button data-fancybox-close class=\"fancybox-button fancybox-button--close\" title=\"{{CLOSE}}\">' +\r\n                        '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M10,10 L30,30 M30,10 L10,30\" />' +\r\n                        '</svg>' +\r\n                    '</button>',\r\n\r\n            // This small close button will be appended to your html/inline/ajax content by default,\r\n            // if \"smallBtn\" option is not set to false\r\n            smallBtn   : '<button data-fancybox-close class=\"fancybox-close-small\" title=\"{{CLOSE}}\"></button>',\r\n\r\n            // Arrows\r\n            arrowLeft : '<button data-fancybox-prev class=\"fancybox-button fancybox-button--arrow_left\" title=\"{{PREV}}\">' +\r\n                            '<svg viewBox=\"0 0 40 40\">' +\r\n                              '<path d=\"M10,20 L30,20 L10,20 L18,28 L10,20 L18,12 L10,20\"></path>' +\r\n                            '</svg>' +\r\n                          '</button>',\r\n\r\n            arrowRight : '<button data-fancybox-next class=\"fancybox-button fancybox-button--arrow_right\" title=\"{{NEXT}}\">' +\r\n                          '<svg viewBox=\"0 0 40 40\">' +\r\n                            '<path d=\"M30,20 L10,20 L30,20 L22,28 L30,20 L22,12 L30,20\"></path>' +\r\n                          '</svg>' +\r\n                        '</button>'\r\n        },\r\n\r\n        // Container is injected into this element\r\n        parentEl : 'body',\r\n\r\n\r\n        // Focus handling\r\n        // ==============\r\n\r\n        // Try to focus on the first focusable element after opening\r\n        autoFocus : false,\r\n\r\n        // Put focus back to active element after closing\r\n        backFocus : true,\r\n\r\n        // Do not let user to focus on element outside modal content\r\n        trapFocus : true,\r\n\r\n\r\n        // Module specific options\r\n        // =======================\r\n\r\n        fullScreen : {\r\n            autoStart : false,\r\n        },\r\n\r\n        // Set `touch: false` to disable dragging/swiping\r\n        touch : {\r\n            vertical : true,  // Allow to drag content vertically\r\n            momentum : true   // Continue movement after releasing mouse/touch when panning\r\n        },\r\n\r\n        // Hash value when initializing manually,\r\n        // set `false` to disable hash change\r\n        hash : null,\r\n\r\n        // Customize or add new media types\r\n        // Example:\r\n        /*\r\n        media : {\r\n            youtube : {\r\n                params : {\r\n                    autoplay : 0\r\n                }\r\n            }\r\n        }\r\n        */\r\n        media : {},\r\n\r\n        slideShow : {\r\n            autoStart : false,\r\n            speed     : 4000\r\n        },\r\n\r\n        thumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t},\r\n\r\n        // Use mousewheel to navigate gallery\r\n        // If 'auto' - enabled for images only\r\n        wheel : 'auto',\r\n\r\n        // Callbacks\r\n        //==========\r\n\r\n        // See Documentation/API/Events for more information\r\n        // Example:\r\n        /*\r\n            afterShow: function( instance, current ) {\r\n                 console.info( 'Clicked element:' );\r\n                 console.info( current.opts.$orig );\r\n            }\r\n        */\r\n\r\n        onInit       : $.noop,  // When instance has been initialized\r\n\r\n        beforeLoad   : $.noop,  // Before the content of a slide is being loaded\r\n        afterLoad    : $.noop,  // When the content of a slide is done loading\r\n\r\n        beforeShow   : $.noop,  // Before open animation starts\r\n        afterShow    : $.noop,  // When content is done loading and animating\r\n\r\n        beforeClose  : $.noop,  // Before the instance attempts to close. Return false to cancel the close.\r\n        afterClose   : $.noop,  // After instance has been closed\r\n\r\n        onActivate   : $.noop,  // When instance is brought to front\r\n        onDeactivate : $.noop,  // When other instance has been activated\r\n\r\n\r\n        // Interaction\r\n        // ===========\r\n\r\n        // Use options below to customize taken action when user clicks or double clicks on the fancyBox area,\r\n        // each option can be string or method that returns value.\r\n        //\r\n        // Possible values:\r\n        //   \"close\"           - close instance\r\n        //   \"next\"            - move to next gallery item\r\n        //   \"nextOrClose\"     - move to next gallery item or close if gallery has only one item\r\n        //   \"toggleControls\"  - show/hide controls\r\n        //   \"zoom\"            - zoom image (if loaded)\r\n        //   false             - do nothing\r\n\r\n        // Clicked on the content\r\n        clickContent : function( current, event ) {\r\n            return current.type === 'image' ? 'zoom' : false;\r\n        },\r\n\r\n        // Clicked on the slide\r\n        clickSlide : 'close',\r\n\r\n        // Clicked on the background (backdrop) element\r\n        clickOutside : 'close',\r\n\r\n        // Same as previous two, but for double click\r\n        dblclickContent : false,\r\n        dblclickSlide   : false,\r\n        dblclickOutside : false,\r\n\r\n\r\n        // Custom options when mobile device is detected\r\n        // =============================================\r\n\r\n        mobile : {\r\n            idleTime : false,\r\n            margin   : 0,\r\n\r\n            clickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : false;\r\n            },\r\n            clickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'toggleControls' : 'close';\r\n            },\r\n            dblclickContent : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            },\r\n            dblclickSlide : function( current, event ) {\r\n                return current.type === 'image' ? 'zoom' : false;\r\n            }\r\n        },\r\n\r\n\r\n        // Internationalization\r\n        // ============\r\n\r\n        lang : 'en',\r\n        i18n : {\r\n            'en' : {\r\n                CLOSE       : 'Close',\r\n                NEXT        : 'Next',\r\n                PREV        : 'Previous',\r\n                ERROR       : 'The requested content cannot be loaded. <br/> Please try again later.',\r\n                PLAY_START  : 'Start slideshow',\r\n                PLAY_STOP   : 'Pause slideshow',\r\n                FULL_SCREEN : 'Full screen',\r\n                THUMBS      : 'Thumbnails',\r\n                DOWNLOAD    : 'Download',\r\n                SHARE       : 'Share',\r\n                ZOOM        : 'Zoom'\r\n            },\r\n            'de' : {\r\n                CLOSE       : 'Schliessen',\r\n                NEXT        : 'Weiter',\r\n                PREV        : 'Zurck',\r\n                ERROR       : 'Die angeforderten Daten konnten nicht geladen werden. <br/> Bitte versuchen Sie es spter nochmal.',\r\n                PLAY_START  : 'Diaschau starten',\r\n                PLAY_STOP   : 'Diaschau beenden',\r\n                FULL_SCREEN : 'Vollbild',\r\n                THUMBS      : 'Vorschaubilder',\r\n                DOWNLOAD    : 'Herunterladen',\r\n                SHARE       : 'Teilen',\r\n                ZOOM        : 'Mastab'\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    // Few useful variables and methods\r\n    // ================================\r\n\r\n    var $W = $(window);\r\n    var $D = $(document);\r\n\r\n    var called = 0;\r\n\r\n\r\n    // Check if an object is a jQuery object and not a native JavaScript object\r\n    // ========================================================================\r\n\r\n    var isQuery = function ( obj ) {\r\n        return obj && obj.hasOwnProperty && obj instanceof $;\r\n    };\r\n\r\n\r\n    // Handle multiple browsers for \"requestAnimationFrame\" and \"cancelAnimationFrame\"\r\n    // ===============================================================================\r\n\r\n    var requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    // Detect the supported transition-end event property name\r\n    // =======================================================\r\n\r\n    var transitionEnd = (function () {\r\n        var t, el = document.createElement(\"fakeelement\");\r\n\r\n        var transitions = {\r\n            \"transition\"      : \"transitionend\",\r\n            \"OTransition\"     : \"oTransitionEnd\",\r\n            \"MozTransition\"   : \"transitionend\",\r\n            \"WebkitTransition\": \"webkitTransitionEnd\"\r\n        };\r\n\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined){\r\n                return transitions[t];\r\n            }\r\n        }\r\n\r\n        return 'transitionend';\r\n    })();\r\n\r\n\r\n    // Force redraw on an element.\r\n    // This helps in cases where the browser doesn't redraw an updated element properly.\r\n    // =================================================================================\r\n\r\n    var forceRedraw = function( $el ) {\r\n        return ( $el && $el.length && $el[0].offsetHeight );\r\n    };\r\n\r\n\r\n    // Class definition\r\n    // ================\r\n\r\n    var FancyBox = function( content, opts, index ) {\r\n        var self = this;\r\n\r\n        self.opts = $.extend( true, { index : index }, $.fancybox.defaults, opts || {} );\r\n\r\n        if ( $.fancybox.isMobile ) {\r\n            self.opts = $.extend( true, {}, self.opts, self.opts.mobile );\r\n        }\r\n\r\n        // Exclude buttons option from deep merging\r\n        if ( opts && $.isArray( opts.buttons ) ) {\r\n            self.opts.buttons = opts.buttons;\r\n        }\r\n\r\n        self.id    = self.opts.id || ++called;\r\n        self.group = [];\r\n\r\n        self.currIndex = parseInt( self.opts.index, 10 ) || 0;\r\n        self.prevIndex = null;\r\n\r\n        self.prevPos = null;\r\n        self.currPos = 0;\r\n\r\n        self.firstRun = null;\r\n\r\n        // Create group elements from original item collection\r\n        self.createGroup( content );\r\n\r\n        if ( !self.group.length ) {\r\n            return;\r\n        }\r\n\r\n        // Save last active element and current scroll position\r\n        self.$lastFocus = $(document.activeElement).blur();\r\n\r\n        // Collection of gallery objects\r\n        self.slides = {};\r\n\r\n        self.init();\r\n    };\r\n\r\n    $.extend(FancyBox.prototype, {\r\n\r\n        // Create DOM structure\r\n        // ====================\r\n\r\n        init : function() {\r\n            var self = this,\r\n                firstItem      = self.group[ self.currIndex ],\r\n                firstItemOpts  = firstItem.opts,\r\n                scrollbarWidth = $.fancybox.scrollbarWidth,\r\n                $scrollDiv,\r\n                $container,\r\n                buttonStr;\r\n\r\n            self.scrollTop  = $D.scrollTop();\r\n            self.scrollLeft = $D.scrollLeft();\r\n\r\n\r\n            // Hide scrollbars\r\n            // ===============\r\n\r\n            if ( !$.fancybox.getInstance() ) {\r\n\r\n                $( 'body' ).addClass( 'fancybox-active' );\r\n\r\n                // iOS hack\r\n                if ( /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream ) {\r\n\r\n                    // iOS has problems for input elements inside fixed containers,\r\n                    // the workaround is to apply `position: fixed` to `<body>` element,\r\n                    // unfortunately, this makes it lose the scrollbars and forces address bar to appear.\r\n\r\n                    if ( firstItem.type !== 'image' ) {\r\n                        $( 'body' ).css( 'top', $( 'body' ).scrollTop() * -1 ).addClass( 'fancybox-iosfix' );\r\n                    }\r\n\r\n                } else if ( !$.fancybox.isMobile && document.body.scrollHeight > window.innerHeight ) {\r\n\r\n                    if ( scrollbarWidth === undefined ) {\r\n                        $scrollDiv = $('<div style=\"width:50px;height:50px;overflow:scroll;\" />').appendTo( 'body' );\r\n\r\n                        scrollbarWidth = $.fancybox.scrollbarWidth = $scrollDiv[0].offsetWidth - $scrollDiv[0].clientWidth;\r\n\r\n                        $scrollDiv.remove();\r\n                    }\r\n\r\n                    $( 'head' ).append( '<style id=\"fancybox-style-noscroll\" type=\"text/css\">.compensate-for-scrollbar { margin-right: ' + scrollbarWidth + 'px; }</style>' );\r\n                    $( 'body' ).addClass( 'compensate-for-scrollbar' );\r\n                }\r\n            }\r\n\r\n\r\n            // Build html markup and set references\r\n            // ====================================\r\n\r\n            // Build html code for buttons and insert into main template\r\n            buttonStr = '';\r\n\r\n            $.each( firstItemOpts.buttons, function( index, value ) {\r\n                buttonStr += ( firstItemOpts.btnTpl[ value ] || '' );\r\n            });\r\n\r\n            // Create markup from base template, it will be initially hidden to\r\n            // avoid unnecessary work like painting while initializing is not complete\r\n            $container = $(\r\n                self.translate( self,\r\n                    firstItemOpts.baseTpl\r\n                        .replace( '\\{\\{buttons\\}\\}', buttonStr )\r\n                        .replace( '\\{\\{arrows\\}\\}', firstItemOpts.btnTpl.arrowLeft + firstItemOpts.btnTpl.arrowRight )\r\n                )\r\n            )\r\n                .attr( 'id', 'fancybox-container-' + self.id )\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .addClass( firstItemOpts.baseClass )\r\n                .data( 'FancyBox', self )\r\n                .appendTo( firstItemOpts.parentEl );\r\n\r\n            // Create object holding references to jQuery wrapped nodes\r\n            self.$refs = {\r\n                container : $container\r\n            };\r\n\r\n            [ 'bg', 'inner', 'infobar', 'toolbar', 'stage', 'caption', 'navigation' ].forEach(function(item) {\r\n                self.$refs[ item ] = $container.find( '.fancybox-' + item );\r\n            });\r\n\r\n            self.trigger( 'onInit' );\r\n\r\n            // Enable events, deactive previous instances\r\n            self.activate();\r\n\r\n            // Build slides, load and reveal content\r\n            self.jumpTo( self.currIndex );\r\n        },\r\n\r\n\r\n        // Simple i18n support - replaces object keys found in template\r\n        // with corresponding values\r\n        // ============================================================\r\n\r\n        translate : function( obj, str ) {\r\n            var arr = obj.opts.i18n[ obj.opts.lang ];\r\n\r\n            return str.replace(/\\{\\{(\\w+)\\}\\}/g, function(match, n) {\r\n                var value = arr[n];\r\n\r\n                if ( value === undefined ) {\r\n                    return match;\r\n                }\r\n\r\n                return value;\r\n            });\r\n        },\r\n\r\n        // Create array of gally item objects\r\n        // Check if each object has valid type and content\r\n        // ===============================================\r\n\r\n        createGroup : function ( content ) {\r\n            var self  = this;\r\n            var items = $.makeArray( content );\r\n\r\n            $.each(items, function( i, item ) {\r\n                var obj  = {},\r\n                    opts = {},\r\n                    $item,\r\n                    type,\r\n                    src,\r\n                    srcParts;\r\n\r\n                // Step 1 - Make sure we have an object\r\n                // ====================================\r\n\r\n                if ( $.isPlainObject( item ) ) {\r\n\r\n                    // We probably have manual usage here, something like\r\n                    // $.fancybox.open( [ { src : \"image.jpg\", type : \"image\" } ] )\r\n\r\n                    obj  = item;\r\n                    opts = item.opts || item;\r\n\r\n                } else if ( $.type( item ) === 'object' && $( item ).length ) {\r\n\r\n                    // Here we probably have jQuery collection returned by some selector\r\n                    $item = $( item );\r\n\r\n                    opts = $item.data();\r\n                    opts = $.extend( {}, opts, opts.options || {} );\r\n\r\n                    // Here we store clicked element\r\n                    opts.$orig = $item;\r\n\r\n                    obj.src = opts.src || $item.attr( 'href' );\r\n\r\n                    // Assume that simple syntax is used, for example:\r\n                    //   `$.fancybox.open( $(\"#test\"), {} );`\r\n                    if ( !obj.type && !obj.src ) {\r\n                        obj.type = 'inline';\r\n                        obj.src  = item;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Assume we have a simple html code, for example:\r\n                    //   $.fancybox.open( '<div><h1>Hi!</h1></div>' );\r\n\r\n                    obj = {\r\n                        type : 'html',\r\n                        src  : item + ''\r\n                    };\r\n\r\n                }\r\n\r\n                // Each gallery object has full collection of options\r\n                obj.opts = $.extend( true, {}, self.opts, opts );\r\n\r\n                // Do not merge buttons array\r\n                if ( $.isArray( opts.buttons ) ) {\r\n                    obj.opts.buttons = opts.buttons;\r\n                }\r\n\r\n\r\n                // Step 2 - Make sure we have content type, if not - try to guess\r\n                // ==============================================================\r\n\r\n                type = obj.type || obj.opts.type;\r\n                src  = obj.src || '';\r\n\r\n                if ( !type && src ) {\r\n                    if ( src.match(/(^data:image\\/[a-z0-9+\\/=]*,)|(\\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\\?|#).*)?$)/i) ) {\r\n                        type = 'image';\r\n\r\n                    } else if ( src.match(/\\.(pdf)((\\?|#).*)?$/i) ) {\r\n                        type = 'pdf';\r\n\r\n                    } else if ( src.charAt(0) === '#' ) {\r\n                        type = 'inline';\r\n                    }\r\n                }\r\n\r\n                if ( type ) {\r\n                    obj.type = type;\r\n\r\n                } else {\r\n                    self.trigger( 'objectNeedsType', obj );\r\n                }\r\n\r\n\r\n                // Step 3 - Some adjustments\r\n                // =========================\r\n\r\n                obj.index = self.group.length;\r\n\r\n                // Check if $orig and $thumb objects exist\r\n                if ( obj.opts.$orig && !obj.opts.$orig.length ) {\r\n                    delete obj.opts.$orig;\r\n                }\r\n\r\n                if ( !obj.opts.$thumb && obj.opts.$orig ) {\r\n                    obj.opts.$thumb = obj.opts.$orig.find( 'img:first' );\r\n                }\r\n\r\n                if ( obj.opts.$thumb && !obj.opts.$thumb.length ) {\r\n                    delete obj.opts.$thumb;\r\n                }\r\n\r\n                // \"caption\" is a \"special\" option, it can be used to customize caption per gallery item ..\r\n                if ( $.type( obj.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = obj.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                if ( $.type( self.opts.caption ) === 'function' ) {\r\n                    obj.opts.caption = self.opts.caption.apply( item, [ self, obj ] );\r\n                }\r\n\r\n                // Make sure we have caption as a string or jQuery object\r\n                if ( !( obj.opts.caption instanceof $ ) ) {\r\n                    obj.opts.caption = obj.opts.caption === undefined ? '' : obj.opts.caption + '';\r\n                }\r\n\r\n                // Check if url contains \"filter\" used to filter the content\r\n                // Example: \"ajax.html #something\"\r\n                if ( type === 'ajax' ) {\r\n                    srcParts = src.split(/\\s+/, 2);\r\n\r\n                    if ( srcParts.length > 1 ) {\r\n                        obj.src = srcParts.shift();\r\n\r\n                        obj.opts.filter = srcParts.shift();\r\n                    }\r\n                }\r\n\r\n                if ( obj.opts.smallBtn == 'auto' ) {\r\n\r\n                    if ( $.inArray( type, ['html', 'inline', 'ajax'] ) > -1 ) {\r\n                        obj.opts.toolbar  = false;\r\n                        obj.opts.smallBtn = true;\r\n\r\n                    } else {\r\n                        obj.opts.smallBtn = false;\r\n                    }\r\n\r\n                }\r\n\r\n                // If the type is \"pdf\", then simply load file into iframe\r\n                if ( type === 'pdf' ) {\r\n                    obj.type = 'iframe';\r\n\r\n                    obj.opts.iframe.preload = false;\r\n                }\r\n\r\n                // Hide all buttons and disable interactivity for modal items\r\n                if ( obj.opts.modal ) {\r\n\r\n                    obj.opts = $.extend(true, obj.opts, {\r\n                        // Remove buttons\r\n                        infobar : 0,\r\n                        toolbar : 0,\r\n\r\n                        smallBtn : 0,\r\n\r\n                        // Disable keyboard navigation\r\n                        keyboard : 0,\r\n\r\n                        // Disable some modules\r\n                        slideShow  : 0,\r\n                        fullScreen : 0,\r\n                        thumbs     : 0,\r\n                        touch      : 0,\r\n\r\n                        // Disable click event handlers\r\n                        clickContent    : false,\r\n                        clickSlide      : false,\r\n                        clickOutside    : false,\r\n                        dblclickContent : false,\r\n                        dblclickSlide   : false,\r\n                        dblclickOutside : false\r\n                    });\r\n\r\n                }\r\n\r\n                // Step 4 - Add processed object to group\r\n                // ======================================\r\n\r\n                self.group.push( obj );\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Attach an event handler functions for:\r\n        //   - navigation buttons\r\n        //   - browser scrolling, resizing;\r\n        //   - focusing\r\n        //   - keyboard\r\n        //   - detect idle\r\n        // ======================================\r\n\r\n        addEvents : function() {\r\n            var self = this;\r\n\r\n            self.removeEvents();\r\n\r\n            // Make navigation elements clickable\r\n            self.$refs.container.on('click.fb-close', '[data-fancybox-close]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.close( e );\r\n\r\n            }).on( 'click.fb-prev touchend.fb-prev', '[data-fancybox-prev]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.previous();\r\n\r\n            }).on( 'click.fb-next touchend.fb-next', '[data-fancybox-next]', function(e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                self.next();\r\n\r\n            }).on( 'click.fb', '[data-fancybox-zoom]', function(e) {\r\n                // Click handler for zoom button\r\n                self[ self.isScaledDown() ? 'scaleToActual' : 'scaleToFit' ]();\r\n            });\r\n\r\n\r\n            // Handle page scrolling and browser resizing\r\n            $W.on('orientationchange.fb resize.fb', function(e) {\r\n\r\n                if ( e && e.originalEvent && e.originalEvent.type === \"resize\" ) {\r\n\r\n                    requestAFrame(function() {\r\n                        self.update();\r\n                    });\r\n\r\n                } else {\r\n\r\n                    self.$refs.stage.hide();\r\n\r\n                    setTimeout(function() {\r\n                        self.$refs.stage.show();\r\n\r\n                        self.update();\r\n                    }, 600);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            // Trap keyboard focus inside of the modal, so the user does not accidentally tab outside of the modal\r\n            // (a.k.a. \"escaping the modal\")\r\n            $D.on('focusin.fb', function(e) {\r\n                var instance = $.fancybox ? $.fancybox.getInstance() : null;\r\n\r\n                if ( instance.isClosing || !instance.current || !instance.current.opts.trapFocus || $( e.target ).hasClass( 'fancybox-container' ) || $( e.target ).is( document ) ) {\r\n                    return;\r\n                }\r\n\r\n                if ( instance && $( e.target ).css( 'position' ) !== 'fixed' && !instance.$refs.container.has( e.target ).length ) {\r\n                    e.stopPropagation();\r\n\r\n                    instance.focus();\r\n\r\n                    // Sometimes page gets scrolled, set it back\r\n                    $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n                }\r\n            });\r\n\r\n\r\n            // Enable keyboard navigation\r\n            $D.on('keydown.fb', function (e) {\r\n                var current = self.current,\r\n                    keycode = e.keyCode || e.which;\r\n\r\n                if ( !current || !current.opts.keyboard ) {\r\n                    return;\r\n                }\r\n\r\n                if ( $(e.target).is('input') || $(e.target).is('textarea') ) {\r\n                    return;\r\n                }\r\n\r\n                // Backspace and Esc keys\r\n                if ( keycode === 8 || keycode === 27 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.close( e );\r\n\r\n                    return;\r\n                }\r\n\r\n                // Left arrow and Up arrow\r\n                if ( keycode === 37 || keycode === 38 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.previous();\r\n\r\n                    return;\r\n                }\r\n\r\n                // Righ arrow and Down arrow\r\n                if ( keycode === 39 || keycode === 40 ) {\r\n                    e.preventDefault();\r\n\r\n                    self.next();\r\n\r\n                    return;\r\n                }\r\n\r\n                self.trigger('afterKeydown', e, keycode);\r\n            });\r\n\r\n\r\n            // Hide controls after some inactivity period\r\n            if ( self.group[ self.currIndex ].opts.idleTime ) {\r\n                self.idleSecondsCounter = 0;\r\n\r\n                $D.on('mousemove.fb-idle mouseleave.fb-idle mousedown.fb-idle touchstart.fb-idle touchmove.fb-idle scroll.fb-idle keydown.fb-idle', function(e) {\r\n                    self.idleSecondsCounter = 0;\r\n\r\n                    if ( self.isIdle ) {\r\n                        self.showControls();\r\n                    }\r\n\r\n                    self.isIdle = false;\r\n                });\r\n\r\n                self.idleInterval = window.setInterval(function() {\r\n                    self.idleSecondsCounter++;\r\n\r\n                    if ( self.idleSecondsCounter >= self.group[ self.currIndex ].opts.idleTime && !self.isDragging ) {\r\n                        self.isIdle = true;\r\n                        self.idleSecondsCounter = 0;\r\n\r\n                        self.hideControls();\r\n                    }\r\n\r\n                }, 1000);\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Remove events added by the core\r\n        // ===============================\r\n\r\n        removeEvents : function() {\r\n            var self = this;\r\n\r\n            $W.off( 'orientationchange.fb resize.fb' );\r\n            $D.off( 'focusin.fb keydown.fb .fb-idle' );\r\n\r\n            this.$refs.container.off( '.fb-close .fb-prev .fb-next' );\r\n\r\n            if ( self.idleInterval ) {\r\n                window.clearInterval( self.idleInterval );\r\n\r\n                self.idleInterval = null;\r\n            }\r\n        },\r\n\r\n\r\n        // Change to previous gallery item\r\n        // ===============================\r\n\r\n        previous : function( duration ) {\r\n            return this.jumpTo( this.currPos - 1, duration );\r\n        },\r\n\r\n\r\n        // Change to next gallery item\r\n        // ===========================\r\n\r\n        next : function( duration ) {\r\n            return this.jumpTo( this.currPos + 1, duration );\r\n        },\r\n\r\n\r\n        // Switch to selected gallery item\r\n        // ===============================\r\n\r\n        jumpTo : function ( pos, duration, slide ) {\r\n            var self = this,\r\n                firstRun,\r\n                loop,\r\n                current,\r\n                previous,\r\n                canvasWidth,\r\n                currentPos,\r\n                transitionProps;\r\n\r\n            var groupLen = self.group.length;\r\n\r\n            if ( self.isDragging || self.isClosing || ( self.isAnimating && self.firstRun ) ) {\r\n                return;\r\n            }\r\n\r\n            pos  = parseInt( pos, 10 );\r\n            loop = self.current ? self.current.opts.loop : self.opts.loop;\r\n\r\n            if ( !loop && ( pos < 0 || pos >= groupLen ) ) {\r\n                return false;\r\n            }\r\n\r\n            firstRun = self.firstRun = ( self.firstRun === null );\r\n\r\n            if ( groupLen < 2 && !firstRun && !!self.isDragging ) {\r\n                return;\r\n            }\r\n\r\n            previous = self.current;\r\n\r\n            self.prevIndex = self.currIndex;\r\n            self.prevPos   = self.currPos;\r\n\r\n            // Create slides\r\n            current = self.createSlide( pos );\r\n\r\n            if ( groupLen > 1 ) {\r\n                if ( loop || current.index > 0 ) {\r\n                    self.createSlide( pos - 1 );\r\n                }\r\n\r\n                if ( loop || current.index < groupLen - 1 ) {\r\n                    self.createSlide( pos + 1 );\r\n                }\r\n            }\r\n\r\n            self.current   = current;\r\n            self.currIndex = current.index;\r\n            self.currPos   = current.pos;\r\n\r\n            self.trigger( 'beforeShow', firstRun );\r\n\r\n            self.updateControls();\r\n\r\n            currentPos = $.fancybox.getTranslate( current.$slide );\r\n\r\n            current.isMoved        = ( currentPos.left !== 0 || currentPos.top !== 0 ) && !current.$slide.hasClass( 'fancybox-animated' );\r\n            current.forcedDuration = undefined;\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                current.forcedDuration = duration;\r\n            } else {\r\n                duration = current.opts[ firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n            }\r\n\r\n            duration = parseInt( duration, 10 );\r\n\r\n            // Fresh start - reveal container, current slide and start loading content\r\n            if ( firstRun ) {\r\n\r\n                if ( current.opts.animationEffect && duration ) {\r\n                    self.$refs.container.css( 'transition-duration', duration + 'ms' );\r\n                }\r\n\r\n                self.$refs.container.removeClass( 'fancybox-is-hidden' );\r\n\r\n                forceRedraw( self.$refs.container );\r\n\r\n                self.$refs.container.addClass( 'fancybox-is-open' );\r\n\r\n                // Make first slide visible (to display loading icon, if needed)\r\n                current.$slide.addClass( 'fancybox-slide--current' );\r\n\r\n                self.loadSlide( current );\r\n\r\n                self.preload();\r\n\r\n                return;\r\n            }\r\n\r\n            // Clean up\r\n            $.each(self.slides, function( index, slide ) {\r\n                $.fancybox.stop( slide.$slide );\r\n            });\r\n\r\n            // Make current that slide is visible even if content is still loading\r\n            current.$slide.removeClass( 'fancybox-slide--next fancybox-slide--previous' ).addClass( 'fancybox-slide--current' );\r\n\r\n            // If slides have been dragged, animate them to correct position\r\n            if ( current.isMoved ) {\r\n                canvasWidth = Math.round( current.$slide.width() );\r\n\r\n                $.each(self.slides, function( index, slide ) {\r\n                    var pos = slide.pos - current.pos;\r\n\r\n                    $.fancybox.animate( slide.$slide, {\r\n                        top  : 0,\r\n                        left : ( pos * canvasWidth ) + ( pos * slide.opts.gutter )\r\n                    }, duration, function() {\r\n\r\n                        slide.$slide.removeAttr('style').removeClass( 'fancybox-slide--next fancybox-slide--previous' );\r\n\r\n                        if ( slide.pos === self.currPos ) {\r\n                            current.isMoved = false;\r\n\r\n                            self.complete();\r\n                        }\r\n                    });\r\n                });\r\n\r\n            } else {\r\n                self.$refs.stage.children().removeAttr( 'style' );\r\n            }\r\n\r\n            // Start transition that reveals current content\r\n            // or wait when it will be loaded\r\n\r\n            if ( current.isLoaded ) {\r\n                self.revealContent( current );\r\n\r\n            } else {\r\n                self.loadSlide( current );\r\n            }\r\n\r\n            self.preload();\r\n\r\n            if ( previous.pos === current.pos ) {\r\n                return;\r\n            }\r\n\r\n            // Handle previous slide\r\n            // =====================\r\n\r\n            transitionProps = 'fancybox-slide--' + ( previous.pos > current.pos ? 'next' : 'previous' );\r\n\r\n            previous.$slide.removeClass( 'fancybox-slide--complete fancybox-slide--current fancybox-slide--next fancybox-slide--previous' );\r\n\r\n            previous.isComplete = false;\r\n\r\n            if ( !duration || ( !current.isMoved && !current.opts.transitionEffect ) ) {\r\n                return;\r\n            }\r\n\r\n            if ( current.isMoved ) {\r\n                previous.$slide.addClass( transitionProps );\r\n\r\n            } else {\r\n\r\n                transitionProps = 'fancybox-animated ' + transitionProps + ' fancybox-fx-' + current.opts.transitionEffect;\r\n\r\n                $.fancybox.animate( previous.$slide, transitionProps, duration, function() {\r\n                    previous.$slide.removeClass( transitionProps ).removeAttr( 'style' );\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create new \"slide\" element\r\n        // These are gallery items  that are actually added to DOM\r\n        // =======================================================\r\n\r\n        createSlide : function( pos ) {\r\n\r\n            var self = this;\r\n            var $slide;\r\n            var index;\r\n\r\n            index = pos % self.group.length;\r\n            index = index < 0 ? self.group.length + index : index;\r\n\r\n            if ( !self.slides[ pos ] && self.group[ index ] ) {\r\n                $slide = $('<div class=\"fancybox-slide\"></div>').appendTo( self.$refs.stage );\r\n\r\n                self.slides[ pos ] = $.extend( true, {}, self.group[ index ], {\r\n                    pos      : pos,\r\n                    $slide   : $slide,\r\n                    isLoaded : false,\r\n                });\r\n\r\n                self.updateSlide( self.slides[ pos ] );\r\n            }\r\n\r\n            return self.slides[ pos ];\r\n        },\r\n\r\n\r\n        // Scale image to the actual size of the image\r\n        // ===========================================\r\n\r\n        scaleToActual : function( x, y, duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var imgPos, posX, posY, scaleX, scaleY;\r\n\r\n            var canvasWidth  = parseInt( current.$slide.width(), 10 );\r\n            var canvasHeight = parseInt( current.$slide.height(), 10 );\r\n\r\n            var newImgWidth  = current.width;\r\n            var newImgHeight = current.height;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            x = x === undefined ? canvasWidth  * 0.5  : x;\r\n            y = y === undefined ? canvasHeight * 0.5  : y;\r\n\r\n            imgPos = $.fancybox.getTranslate( $what );\r\n\r\n            scaleX  = newImgWidth  / imgPos.width;\r\n            scaleY  = newImgHeight / imgPos.height;\r\n\r\n            // Get center position for original image\r\n            posX = ( canvasWidth * 0.5  - newImgWidth * 0.5 );\r\n            posY = ( canvasHeight * 0.5 - newImgHeight * 0.5 );\r\n\r\n            // Make sure image does not move away from edges\r\n            if ( newImgWidth > canvasWidth ) {\r\n                posX = imgPos.left * scaleX - ( ( x * scaleX ) - x );\r\n\r\n                if ( posX > 0 ) {\r\n                    posX = 0;\r\n                }\r\n\r\n                if ( posX <  canvasWidth - newImgWidth ) {\r\n                    posX = canvasWidth - newImgWidth;\r\n                }\r\n            }\r\n\r\n            if ( newImgHeight > canvasHeight) {\r\n                posY = imgPos.top  * scaleY - ( ( y * scaleY ) - y );\r\n\r\n                if ( posY > 0 ) {\r\n                    posY = 0;\r\n                }\r\n\r\n                if ( posY <  canvasHeight - newImgHeight ) {\r\n                    posY = canvasHeight - newImgHeight;\r\n                }\r\n            }\r\n\r\n            self.updateCursor( newImgWidth, newImgHeight );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : posY,\r\n                left   : posX,\r\n                scaleX : scaleX,\r\n                scaleY : scaleY\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n            // Stop slideshow\r\n            if ( self.SlideShow && self.SlideShow.isActive ) {\r\n                self.SlideShow.stop();\r\n            }\r\n        },\r\n\r\n\r\n        // Scale image to fit inside parent element\r\n        // ========================================\r\n\r\n        scaleToFit : function( duration ) {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n            var end;\r\n\r\n            if ( !( current.type == 'image' && !current.hasError) || !$what || self.isAnimating ) {\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $what );\r\n\r\n            self.isAnimating = true;\r\n\r\n            end = self.getFitPos( current );\r\n\r\n            self.updateCursor( end.width, end.height );\r\n\r\n            $.fancybox.animate( $what, {\r\n                top    : end.top,\r\n                left   : end.left,\r\n                scaleX : end.width  / $what.width(),\r\n                scaleY : end.height / $what.height()\r\n            }, duration || 330, function() {\r\n                self.isAnimating = false;\r\n            });\r\n\r\n        },\r\n\r\n        // Calculate image size to fit inside viewport\r\n        // ===========================================\r\n\r\n        getFitPos : function( slide ) {\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            var imgWidth  = slide.width;\r\n            var imgHeight = slide.height;\r\n\r\n            var margin = slide.opts.margin;\r\n\r\n            var canvasWidth, canvasHeight, minRatio, width, height;\r\n\r\n            if ( !$what || !$what.length || ( !imgWidth && !imgHeight) ) {\r\n                return false;\r\n            }\r\n\r\n            // Convert \"margin to CSS style: [ top, right, bottom, left ]\r\n            if ( $.type( margin ) === \"number\" ) {\r\n                margin = [ margin, margin ];\r\n            }\r\n\r\n            if ( margin.length == 2 ) {\r\n                margin = [ margin[0], margin[1], margin[0], margin[1] ];\r\n            }\r\n\r\n            // We can not use $slide width here, because it can have different diemensions while in transiton\r\n            canvasWidth  = parseInt( self.$refs.stage.width(), 10 )  - ( margin[ 1 ] + margin[ 3 ] );\r\n            canvasHeight = parseInt( self.$refs.stage.height(), 10 ) - ( margin[ 0 ] + margin[ 2 ] );\r\n\r\n            minRatio = Math.min(1, canvasWidth / imgWidth, canvasHeight / imgHeight );\r\n\r\n            width  = Math.floor( minRatio * imgWidth );\r\n            height = Math.floor( minRatio * imgHeight );\r\n\r\n            // Use floor rounding to make sure it really fits\r\n            return {\r\n                top    : Math.floor( ( canvasHeight - height ) * 0.5 ) + margin[ 0 ],\r\n                left   : Math.floor( ( canvasWidth  - width )  * 0.5 ) + margin[ 3 ],\r\n                width  : width,\r\n                height : height\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Update position and content of all slides\r\n        // =========================================\r\n\r\n        update : function() {\r\n\r\n            var self = this;\r\n\r\n            $.each( self.slides, function( key, slide ) {\r\n                self.updateSlide( slide );\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Update slide position and scale content to fit\r\n        // ==============================================\r\n\r\n        updateSlide : function( slide ) {\r\n\r\n            var self  = this;\r\n            var $what = slide.$content;\r\n\r\n            if ( $what && ( slide.width || slide.height ) ) {\r\n                self.isAnimating = false;\r\n\r\n                $.fancybox.stop( $what );\r\n\r\n                $.fancybox.setTranslate( $what, self.getFitPos( slide ) );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.updateCursor();\r\n                }\r\n            }\r\n\r\n            slide.$slide.trigger( 'refresh' );\r\n\r\n            self.trigger( 'onUpdate', slide );\r\n\r\n        },\r\n\r\n        // Update cursor style depending if content can be zoomed\r\n        // ======================================================\r\n\r\n        updateCursor : function( nextWidth, nextHeight ) {\r\n\r\n            var self = this;\r\n            var isScaledDown;\r\n\r\n            var $container = self.$refs.container.removeClass( 'fancybox-is-zoomable fancybox-can-zoomIn fancybox-can-drag fancybox-can-zoomOut' );\r\n\r\n            if ( !self.current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( self.isZoomable() ) {\r\n\r\n                $container.addClass( 'fancybox-is-zoomable' );\r\n\r\n                if ( nextWidth !== undefined && nextHeight !== undefined ) {\r\n                    isScaledDown = nextWidth < self.current.width && nextHeight < self.current.height;\r\n\r\n                } else {\r\n                    isScaledDown = self.isScaledDown();\r\n                }\r\n\r\n                if ( isScaledDown ) {\r\n\r\n                    // If image is scaled down, then, obviously, it can be zoomed to full size\r\n                    $container.addClass( 'fancybox-can-zoomIn' );\r\n\r\n                } else {\r\n\r\n                    if ( self.current.opts.touch ) {\r\n\r\n                        // If image size ir largen than available available and touch module is not disable,\r\n                        // then user can do panning\r\n                        $container.addClass( 'fancybox-can-drag' );\r\n\r\n                    } else {\r\n                        $container.addClass( 'fancybox-can-zoomOut' );\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( self.current.opts.touch ) {\r\n                $container.addClass( 'fancybox-can-drag' );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Check if current slide is zoomable\r\n        // ==================================\r\n\r\n        isZoomable : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var fitPos;\r\n\r\n            if ( !current || self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            // Assume that slide is zoomable if\r\n            //   - image is loaded successfuly\r\n            //   - click action is \"zoom\"\r\n            //   - actual size of the image is smaller than available area\r\n            if ( current.type === 'image' && current.isLoaded && !current.hasError &&\r\n                ( current.opts.clickContent === 'zoom' || ( $.isFunction( current.opts.clickContent ) && current.opts.clickContent( current ) ===  \"zoom\" ) )\r\n            ) {\r\n\r\n                fitPos = self.getFitPos( current );\r\n\r\n                if ( current.width > fitPos.width || current.height > fitPos.height ) {\r\n                    return true;\r\n                }\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Check if current image dimensions are smaller than actual\r\n        // =========================================================\r\n\r\n        isScaledDown : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = $.fancybox.getTranslate( $what );\r\n                rez = rez.width < current.width || rez.height < current.height;\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Check if image dimensions exceed parent element\r\n        // ===============================================\r\n\r\n        canPan : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var $what   = current.$content;\r\n\r\n            var rez = false;\r\n\r\n            if ( $what ) {\r\n                rez = self.getFitPos( current );\r\n                rez = Math.abs( $what.width() - rez.width ) > 1  || Math.abs( $what.height() - rez.height ) > 1;\r\n\r\n            }\r\n\r\n            return rez;\r\n\r\n        },\r\n\r\n\r\n        // Load content into the slide\r\n        // ===========================\r\n\r\n        loadSlide : function( slide ) {\r\n\r\n            var self = this, type, $slide;\r\n            var ajaxLoad;\r\n\r\n            if ( slide.isLoading ) {\r\n                return;\r\n            }\r\n\r\n            if ( slide.isLoaded ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = true;\r\n\r\n            self.trigger( 'beforeLoad', slide );\r\n\r\n            type   = slide.type;\r\n            $slide = slide.$slide;\r\n\r\n            $slide\r\n                .off( 'refresh' )\r\n                .trigger( 'onReset' )\r\n                .addClass( 'fancybox-slide--' + ( type || 'unknown' ) )\r\n                .addClass( slide.opts.slideClass );\r\n\r\n            // Create content depending on the type\r\n\r\n            switch ( type ) {\r\n\r\n                case 'image':\r\n\r\n                    self.setImage( slide );\r\n\r\n                break;\r\n\r\n                case 'iframe':\r\n\r\n                    self.setIframe( slide );\r\n\r\n                break;\r\n\r\n                case 'html':\r\n\r\n                    self.setContent( slide, slide.src || slide.content );\r\n\r\n                break;\r\n\r\n                case 'inline':\r\n\r\n                    if ( $( slide.src ).length ) {\r\n                        self.setContent( slide, $( slide.src ) );\r\n\r\n                    } else {\r\n                        self.setError( slide );\r\n                    }\r\n\r\n                break;\r\n\r\n                case 'ajax':\r\n\r\n                    self.showLoading( slide );\r\n\r\n                    ajaxLoad = $.ajax( $.extend( {}, slide.opts.ajax.settings, {\r\n                        url : slide.src,\r\n                        success : function ( data, textStatus ) {\r\n\r\n                            if ( textStatus === 'success' ) {\r\n                                self.setContent( slide, data );\r\n                            }\r\n\r\n                        },\r\n                        error : function ( jqXHR, textStatus ) {\r\n\r\n                            if ( jqXHR && textStatus !== 'abort' ) {\r\n                                self.setError( slide );\r\n                            }\r\n\r\n                        }\r\n                    }));\r\n\r\n                    $slide.one( 'onReset', function () {\r\n                        ajaxLoad.abort();\r\n                    });\r\n\r\n                break;\r\n\r\n                default:\r\n\r\n                    self.setError( slide );\r\n\r\n                break;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n\r\n        // Use thumbnail image, if possible\r\n        // ================================\r\n\r\n        setImage : function( slide ) {\r\n\r\n            var self   = this;\r\n            var srcset = slide.opts.srcset || slide.opts.image.srcset;\r\n\r\n            var found, temp, pxRatio, windowWidth;\r\n\r\n            // If we have \"srcset\", then we need to find matching \"src\" value.\r\n            // This is necessary, because when you set an src attribute, the browser will preload the image\r\n            // before any javascript or even CSS is applied.\r\n            if ( srcset ) {\r\n                pxRatio     = window.devicePixelRatio || 1;\r\n                windowWidth = window.innerWidth  * pxRatio;\r\n\r\n                temp = srcset.split(',').map(function ( el ) {\r\n            \t\tvar ret = {};\r\n\r\n            \t\tel.trim().split(/\\s+/).forEach(function ( el, i ) {\r\n                        var value = parseInt( el.substring(0, el.length - 1), 10 );\r\n\r\n            \t\t\tif ( i === 0 ) {\r\n            \t\t\t\treturn ( ret.url = el );\r\n            \t\t\t}\r\n\r\n                        if ( value ) {\r\n                            ret.value   = value;\r\n                            ret.postfix = el[ el.length - 1 ];\r\n                        }\r\n\r\n            \t\t});\r\n\r\n            \t\treturn ret;\r\n            \t});\r\n\r\n                // Sort by value\r\n                temp.sort(function (a, b) {\r\n                  return a.value - b.value;\r\n                });\r\n\r\n                // Ok, now we have an array of all srcset values\r\n                for ( var j = 0; j < temp.length; j++ ) {\r\n                    var el = temp[ j ];\r\n\r\n                    if ( ( el.postfix === 'w' && el.value >= windowWidth ) || ( el.postfix === 'x' && el.value >= pxRatio ) ) {\r\n                        found = el;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If not found, take the last one\r\n                if ( !found && temp.length ) {\r\n                    found = temp[ temp.length - 1 ];\r\n                }\r\n\r\n                if ( found ) {\r\n                    slide.src = found.url;\r\n\r\n                    // If we have default width/height values, we can calculate height for matching source\r\n                    if ( slide.width && slide.height && found.postfix == 'w' ) {\r\n                        slide.height = ( slide.width / slide.height ) * found.value;\r\n                        slide.width  = found.value;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // This will be wrapper containing both ghost and actual image\r\n            slide.$content = $('<div class=\"fancybox-image-wrap\"></div>')\r\n                .addClass( 'fancybox-is-hidden' )\r\n                .appendTo( slide.$slide );\r\n\r\n\r\n            // If we have a thumbnail, we can display it while actual image is loading\r\n            // Users will not stare at black screen and actual image will appear gradually\r\n            if ( slide.opts.preload !== false && slide.opts.width && slide.opts.height && ( slide.opts.thumb || slide.opts.$thumb ) ) {\r\n\r\n                slide.width  = slide.opts.width;\r\n                slide.height = slide.opts.height;\r\n\r\n                slide.$ghost = $('<img />')\r\n                    .one('error', function() {\r\n\r\n                        $(this).remove();\r\n\r\n                        slide.$ghost = null;\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .one('load', function() {\r\n\r\n                        self.afterLoad( slide );\r\n\r\n                        self.setBigImage( slide );\r\n\r\n                    })\r\n                    .addClass( 'fancybox-image' )\r\n                    .appendTo( slide.$content )\r\n                    .attr( 'src', slide.opts.thumb || slide.opts.$thumb.attr( 'src' ) );\r\n\r\n            } else {\r\n\r\n                self.setBigImage( slide );\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create full-size image\r\n        // ======================\r\n\r\n        setBigImage : function ( slide ) {\r\n            var self = this;\r\n            var $img = $('<img />');\r\n\r\n            slide.$image = $img\r\n                .one('error', function() {\r\n\r\n                    self.setError( slide );\r\n\r\n                })\r\n                .one('load', function() {\r\n\r\n                    // Clear timeout that checks if loading icon needs to be displayed\r\n                    clearTimeout( slide.timouts );\r\n\r\n                    slide.timouts = null;\r\n\r\n                    if ( self.isClosing ) {\r\n                        return;\r\n                    }\r\n\r\n                    slide.width  = this.naturalWidth;\r\n                    slide.height = this.naturalHeight;\r\n\r\n                    if ( slide.opts.image.srcset ) {\r\n                        $img.attr( 'sizes', '100vw' ).attr( 'srcset', slide.opts.image.srcset );\r\n                    }\r\n\r\n                    self.hideLoading( slide );\r\n\r\n                    if ( slide.$ghost ) {\r\n\r\n                        slide.timouts = setTimeout(function() {\r\n                            slide.timouts = null;\r\n\r\n                            slide.$ghost.hide();\r\n\r\n                        }, Math.min( 300, Math.max( 1000, slide.height / 1600 ) ) );\r\n\r\n                    } else {\r\n                        self.afterLoad( slide );\r\n                    }\r\n\r\n                })\r\n                .addClass( 'fancybox-image' )\r\n                .attr('src', slide.src)\r\n                .appendTo( slide.$content );\r\n\r\n            if ( ( $img[0].complete || $img[0].readyState == \"complete\" ) && $img[0].naturalWidth && $img[0].naturalHeight ) {\r\n                  $img.trigger( 'load' );\r\n\r\n            } else if( $img[0].error ) {\r\n                 $img.trigger( 'error' );\r\n\r\n            } else {\r\n\r\n                slide.timouts = setTimeout(function() {\r\n                    if ( !$img[0].complete && !slide.hasError ) {\r\n                        self.showLoading( slide );\r\n                    }\r\n\r\n                }, 100);\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Create iframe wrapper, iframe and bindings\r\n        // ==========================================\r\n\r\n        setIframe : function( slide ) {\r\n            var self\t= this,\r\n                opts    = slide.opts.iframe,\r\n                $slide\t= slide.$slide,\r\n                $iframe;\r\n\r\n            slide.$content = $('<div class=\"fancybox-content' + ( opts.preload ? ' fancybox-is-hidden' : '' ) + '\"></div>')\r\n                .css( opts.css )\r\n                .appendTo( $slide );\r\n\r\n            $iframe = $( opts.tpl.replace(/\\{rnd\\}/g, new Date().getTime()) )\r\n                .attr( opts.attr )\r\n                .appendTo( slide.$content );\r\n\r\n            if ( opts.preload ) {\r\n\r\n                self.showLoading( slide );\r\n\r\n                // Unfortunately, it is not always possible to determine if iframe is successfully loaded\r\n                // (due to browser security policy)\r\n\r\n                $iframe.on('load.fb error.fb', function(e) {\r\n                    this.isReady = 1;\r\n\r\n                    slide.$slide.trigger( 'refresh' );\r\n\r\n                    self.afterLoad( slide );\r\n                });\r\n\r\n                // Recalculate iframe content size\r\n                // ===============================\r\n\r\n                $slide.on('refresh.fb', function() {\r\n                    var $wrap = slide.$content,\r\n                        frameWidth  = opts.css.width,\r\n                        frameHeight = opts.css.height,\r\n                        scrollWidth,\r\n                        $contents,\r\n                        $body;\r\n\r\n                    if ( $iframe[0].isReady !== 1 ) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check if content is accessible,\r\n                    // it will fail if frame is not with the same origin\r\n\r\n                    try {\r\n                        $contents = $iframe.contents();\r\n                        $body     = $contents.find('body');\r\n\r\n                    } catch (ignore) {}\r\n\r\n                    // Calculate dimensions for the wrapper\r\n                    if ( $body && $body.length ) {\r\n\r\n                        if ( frameWidth === undefined ) {\r\n                            scrollWidth = $iframe[0].contentWindow.document.documentElement.scrollWidth;\r\n\r\n                            frameWidth = Math.ceil( $body.outerWidth(true) + ( $wrap.width() - scrollWidth ) );\r\n                            frameWidth += $wrap.outerWidth() - $wrap.innerWidth();\r\n                        }\r\n\r\n                        if ( frameHeight === undefined ) {\r\n                            frameHeight = Math.ceil( $body.outerHeight(true) );\r\n                            frameHeight += $wrap.outerHeight() - $wrap.innerHeight();\r\n                        }\r\n\r\n                        // Resize wrapper to fit iframe content\r\n                        if ( frameWidth ) {\r\n                            $wrap.width( frameWidth );\r\n                        }\r\n\r\n                        if ( frameHeight ) {\r\n                            $wrap.height( frameHeight );\r\n                        }\r\n                    }\r\n\r\n                    $wrap.removeClass( 'fancybox-is-hidden' );\r\n\r\n                });\r\n\r\n            } else {\r\n\r\n                this.afterLoad( slide );\r\n\r\n            }\r\n\r\n            $iframe.attr( 'src', slide.src );\r\n\r\n            if ( slide.opts.smallBtn === true ) {\r\n                slide.$content.prepend( self.translate( slide, slide.opts.btnTpl.smallBtn ) );\r\n            }\r\n\r\n            // Remove iframe if closing or changing gallery item\r\n            $slide.one( 'onReset', function () {\r\n\r\n                // This helps IE not to throw errors when closing\r\n                try {\r\n\r\n                    $( this ).find( 'iframe' ).hide().attr( 'src', '//about:blank' );\r\n\r\n                } catch ( ignore ) {}\r\n\r\n                $( this ).empty();\r\n\r\n                slide.isLoaded = false;\r\n\r\n            });\r\n\r\n        },\r\n\r\n\r\n        // Wrap and append content to the slide\r\n        // ======================================\r\n\r\n        setContent : function ( slide, content ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            self.hideLoading( slide );\r\n\r\n            slide.$slide.empty();\r\n\r\n            if ( isQuery( content ) && content.parent().length ) {\r\n\r\n                // If content is a jQuery object, then it will be moved to the slide.\r\n                // The placeholder is created so we will know where to put it back.\r\n                // If user is navigating gallery fast, then the content might be already inside fancyBox\r\n                // =====================================================================================\r\n\r\n                // Make sure content is not already moved to fancyBox\r\n                content.parent( '.fancybox-slide--inline' ).trigger( 'onReset' );\r\n\r\n                // Create temporary element marking original place of the content\r\n                slide.$placeholder = $( '<div></div>' ).hide().insertAfter( content );\r\n\r\n                // Make sure content is visible\r\n                content.css('display', 'inline-block');\r\n\r\n            } else if ( !slide.hasError ) {\r\n\r\n                // If content is just a plain text, try to convert it to html\r\n                if ( $.type( content ) === 'string' ) {\r\n                    content = $('<div>').append( $.trim( content ) ).contents();\r\n\r\n                    // If we have text node, then add wrapping element to make vertical alignment work\r\n                    if ( content[0].nodeType === 3 ) {\r\n                        content = $('<div>').html( content );\r\n                    }\r\n                }\r\n\r\n                // If \"filter\" option is provided, then filter content\r\n                if ( slide.opts.filter ) {\r\n                    content = $('<div>').html( content ).find( slide.opts.filter );\r\n                }\r\n\r\n            }\r\n\r\n            slide.$slide.one('onReset', function () {\r\n\r\n                // Pause all html5 video/audio\r\n                $(this).find(\"video,audio\").each(function () { this.pause(); });\r\n\r\n                // Put content back\r\n                if ( slide.$placeholder ) {\r\n                    slide.$placeholder.after( content.hide() ).remove();\r\n\r\n                    slide.$placeholder = null;\r\n                }\r\n\r\n                // Remove custom close button\r\n                if ( slide.$smallBtn ) {\r\n                    slide.$smallBtn.remove();\r\n\r\n                    slide.$smallBtn = null;\r\n                }\r\n\r\n                // Remove content and mark slide as not loaded\r\n                if ( !slide.hasError ) {\r\n                    $(this).empty();\r\n\r\n                    slide.isLoaded = false;\r\n                }\r\n\r\n            });\r\n\r\n            slide.$content = $( content ).appendTo( slide.$slide );\r\n\r\n            this.afterLoad( slide );\r\n        },\r\n\r\n        // Display error message\r\n        // =====================\r\n\r\n        setError : function ( slide ) {\r\n\r\n            slide.hasError = true;\r\n\r\n            slide.$slide.removeClass( 'fancybox-slide--' + slide.type );\r\n\r\n            this.setContent( slide, this.translate( slide, slide.opts.errorTpl ) );\r\n\r\n        },\r\n\r\n\r\n        // Show loading icon inside the slide\r\n        // ==================================\r\n\r\n        showLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && !slide.$spinner ) {\r\n                slide.$spinner = $( self.opts.spinnerTpl ).appendTo( slide.$slide );\r\n            }\r\n\r\n        },\r\n\r\n        // Remove loading icon from the slide\r\n        // ==================================\r\n\r\n        hideLoading : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            slide = slide || self.current;\r\n\r\n            if ( slide && slide.$spinner ) {\r\n                slide.$spinner.remove();\r\n\r\n                delete slide.$spinner;\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Adjustments after slide content has been loaded\r\n        // ===============================================\r\n\r\n        afterLoad : function( slide ) {\r\n\r\n            var self = this;\r\n\r\n            if ( self.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            slide.isLoading = false;\r\n            slide.isLoaded  = true;\r\n\r\n            self.trigger( 'afterLoad', slide );\r\n\r\n            self.hideLoading( slide );\r\n\r\n            if ( slide.opts.smallBtn && !slide.$smallBtn ) {\r\n                slide.$smallBtn = $( self.translate( slide, slide.opts.btnTpl.smallBtn ) ).appendTo( slide.$content.filter('div,form').first() );\r\n            }\r\n\r\n            if ( slide.opts.protect && slide.$content && !slide.hasError ) {\r\n\r\n                // Disable right click\r\n                slide.$content.on( 'contextmenu.fb', function( e ) {\r\n                     if ( e.button == 2 ) {\r\n                         e.preventDefault();\r\n                     }\r\n\r\n                    return true;\r\n                });\r\n\r\n                // Add fake element on top of the image\r\n                // This makes a bit harder for user to select image\r\n                if ( slide.type === 'image' ) {\r\n                    $( '<div class=\"fancybox-spaceball\"></div>' ).appendTo( slide.$content );\r\n                }\r\n\r\n            }\r\n\r\n            self.revealContent( slide );\r\n\r\n        },\r\n\r\n\r\n        // Make content visible\r\n        // This method is called right after content has been loaded or\r\n        // user navigates gallery and transition should start\r\n        // ============================================================\r\n\r\n        revealContent : function( slide ) {\r\n\r\n            var self   = this;\r\n            var $slide = slide.$slide;\r\n\r\n            var effect, effectClassName, duration, opacity, end, start = false;\r\n\r\n            effect   = slide.opts[ self.firstRun ? 'animationEffect'   : 'transitionEffect' ];\r\n            duration = slide.opts[ self.firstRun ? 'animationDuration' : 'transitionDuration' ];\r\n\r\n            duration = parseInt( slide.forcedDuration === undefined ? duration : slide.forcedDuration, 10 );\r\n\r\n            if ( slide.isMoved || slide.pos !== self.currPos || !duration ) {\r\n                effect = false;\r\n            }\r\n\r\n            // Check if can zoom\r\n            if ( effect === 'zoom' && !( slide.pos === self.currPos && duration && slide.type === 'image' && !slide.hasError && ( start = self.getThumbPos( slide ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            // Zoom animation\r\n            // ==============\r\n\r\n            if ( effect === 'zoom' ) {\r\n                end = self.getFitPos( slide );\r\n\r\n                end.scaleX = end.width  / start.width;\r\n                end.scaleY = end.height / start.height;\r\n\r\n                delete end.width;\r\n                delete end.height;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = slide.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( slide.width / slide.height - start.width / start.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    start.opacity = 0.1;\r\n                    end.opacity   = 1;\r\n                }\r\n\r\n                // Draw image at start position\r\n                $.fancybox.setTranslate( slide.$content.removeClass( 'fancybox-is-hidden' ), start );\r\n\r\n                forceRedraw( slide.$content );\r\n\r\n                // Start animation\r\n                $.fancybox.animate( slide.$content, end, duration, function() {\r\n                    self.complete();\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            self.updateSlide( slide );\r\n\r\n\r\n            // Simply show content\r\n            // ===================\r\n\r\n            if ( !effect ) {\r\n                forceRedraw( $slide );\r\n\r\n                slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            $.fancybox.stop( $slide );\r\n\r\n            effectClassName = 'fancybox-animated fancybox-slide--' + ( slide.pos >= self.prevPos ? 'next' : 'previous' ) + ' fancybox-fx-' + effect;\r\n\r\n            $slide.removeAttr( 'style' ).removeClass( 'fancybox-slide--current fancybox-slide--next fancybox-slide--previous' ).addClass( effectClassName );\r\n\r\n            slide.$content.removeClass( 'fancybox-is-hidden' );\r\n\r\n            //Force reflow for CSS3 transitions\r\n            forceRedraw( $slide );\r\n\r\n            $.fancybox.animate( $slide, 'fancybox-slide--current', duration, function(e) {\r\n                $slide.removeClass( effectClassName ).removeAttr( 'style' );\r\n\r\n                if ( slide.pos === self.currPos ) {\r\n                    self.complete();\r\n                }\r\n\r\n            }, true);\r\n\r\n        },\r\n\r\n\r\n        // Check if we can and have to zoom from thumbnail\r\n        //================================================\r\n\r\n        getThumbPos : function( slide ) {\r\n\r\n            var self = this;\r\n            var rez  = false;\r\n\r\n            // Check if element is inside the viewport by at least 1 pixel\r\n            var isElementVisible = function( $el ) {\r\n                var element = $el[0];\r\n\r\n                var elementRect = element.getBoundingClientRect();\r\n                var parentRects = [];\r\n\r\n                var visibleInAllParents;\r\n\r\n                while ( element.parentElement !== null ) {\r\n                    if ( $(element.parentElement).css('overflow') === 'hidden'  || $(element.parentElement).css('overflow') === 'auto' ) {\r\n                        parentRects.push(element.parentElement.getBoundingClientRect());\r\n                    }\r\n\r\n                    element = element.parentElement;\r\n                }\r\n\r\n                visibleInAllParents = parentRects.every(function(parentRect){\r\n                    var visiblePixelX = Math.min(elementRect.right, parentRect.right) - Math.max(elementRect.left, parentRect.left);\r\n                    var visiblePixelY = Math.min(elementRect.bottom, parentRect.bottom) - Math.max(elementRect.top, parentRect.top);\r\n\r\n                    return visiblePixelX > 0 && visiblePixelY > 0;\r\n                });\r\n\r\n                return visibleInAllParents &&\r\n                    elementRect.bottom > 0 && elementRect.right > 0 &&\r\n                    elementRect.left < $(window).width() && elementRect.top < $(window).height();\r\n            };\r\n\r\n            var $thumb   = slide.opts.$thumb;\r\n            var thumbPos = $thumb ? $thumb.offset() : 0;\r\n            var slidePos;\r\n\r\n            if ( thumbPos && $thumb[0].ownerDocument === document && isElementVisible( $thumb ) ) {\r\n                slidePos = self.$refs.stage.offset();\r\n\r\n                rez = {\r\n                    top    : thumbPos.top  - slidePos.top  + parseFloat( $thumb.css( \"border-top-width\" ) || 0 ),\r\n                    left   : thumbPos.left - slidePos.left + parseFloat( $thumb.css( \"border-left-width\" ) || 0 ),\r\n                    width  : $thumb.width(),\r\n                    height : $thumb.height(),\r\n                    scaleX : 1,\r\n                    scaleY : 1\r\n                };\r\n            }\r\n\r\n            return rez;\r\n        },\r\n\r\n\r\n        // Final adjustments after current gallery item is moved to position\r\n        // and it`s content is loaded\r\n        // ==================================================================\r\n\r\n        complete : function() {\r\n\r\n            var self = this;\r\n\r\n            var current = self.current;\r\n            var slides  = {};\r\n\r\n            if ( current.isMoved || !current.isLoaded || current.isComplete ) {\r\n                return;\r\n            }\r\n\r\n            current.isComplete = true;\r\n\r\n            current.$slide.siblings().trigger( 'onReset' );\r\n\r\n            // Trigger any CSS3 transiton inside the slide\r\n            forceRedraw( current.$slide );\r\n\r\n            current.$slide.addClass( 'fancybox-slide--complete' );\r\n\r\n            // Remove unnecessary slides\r\n            $.each( self.slides, function( key, slide ) {\r\n                if ( slide.pos >= self.currPos - 1 && slide.pos <= self.currPos + 1 ) {\r\n                    slides[ slide.pos ] = slide;\r\n\r\n                } else if ( slide ) {\r\n\r\n                    $.fancybox.stop( slide.$slide );\r\n\r\n                    slide.$slide.off().remove();\r\n                }\r\n            });\r\n\r\n            self.slides = slides;\r\n\r\n            self.updateCursor();\r\n\r\n            self.trigger( 'afterShow' );\r\n\r\n            // Play first html5 video/audio\r\n            var media = current.$slide.find(\"video,audio\").first();\r\n\r\n            if ( media.length ) {\r\n                media[0].play();\r\n            }\r\n\r\n            // Try to focus on the first focusable element\r\n            if ( $( document.activeElement ).is( '[disabled]' ) || ( current.opts.autoFocus && !( current.type == 'image' || current.type === 'iframe' ) ) ) {\r\n                self.focus();\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Preload next and previous slides\r\n        // ================================\r\n\r\n        preload : function() {\r\n            var self = this;\r\n            var next, prev;\r\n\r\n            if ( self.group.length < 2 ) {\r\n                return;\r\n            }\r\n\r\n            next  = self.slides[ self.currPos + 1 ];\r\n            prev  = self.slides[ self.currPos - 1 ];\r\n\r\n            if ( next && next.type === 'image' ) {\r\n                self.loadSlide( next );\r\n            }\r\n\r\n            if ( prev && prev.type === 'image' ) {\r\n                self.loadSlide( prev );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Try to find and focus on the first focusable element\r\n        // ====================================================\r\n\r\n        focus : function() {\r\n            var current = this.current;\r\n            var $el;\r\n\r\n            if ( this.isClosing ) {\r\n                return;\r\n            }\r\n\r\n            if ( current && current.isComplete ) {\r\n\r\n                // Look for first input with autofocus attribute\r\n                $el = current.$slide.find('input[autofocus]:enabled:visible:first');\r\n\r\n                if ( !$el.length ) {\r\n                    $el = current.$slide.find('button,:input,[tabindex],a').filter(':enabled:visible:first');\r\n                }\r\n            }\r\n\r\n            $el = $el && $el.length ? $el : this.$refs.container;\r\n\r\n            $el.focus();\r\n        },\r\n\r\n\r\n        // Activates current instance - brings container to the front and enables keyboard,\r\n        // notifies other instances about deactivating\r\n        // =================================================================================\r\n\r\n        activate : function () {\r\n            var self = this;\r\n\r\n            // Deactivate all instances\r\n            $( '.fancybox-container' ).each(function () {\r\n                var instance = $(this).data( 'FancyBox' );\r\n\r\n                // Skip self and closing instances\r\n                if (instance && instance.id !== self.id && !instance.isClosing) {\r\n                    instance.trigger( 'onDeactivate' );\r\n\r\n                    instance.removeEvents();\r\n\r\n                    instance.isVisible = false;\r\n                }\r\n\r\n            });\r\n\r\n            self.isVisible = true;\r\n\r\n            if ( self.current || self.isIdle ) {\r\n                self.update();\r\n\r\n                self.updateControls();\r\n            }\r\n\r\n            self.trigger( 'onActivate' );\r\n\r\n            self.addEvents();\r\n        },\r\n\r\n\r\n        // Start closing procedure\r\n        // This will start \"zoom-out\" animation if needed and clean everything up afterwards\r\n        // =================================================================================\r\n\r\n        close : function( e, d ) {\r\n\r\n            var self    = this;\r\n            var current = self.current;\r\n\r\n            var effect, duration;\r\n            var $what, opacity, start, end;\r\n\r\n            var done = function() {\r\n                self.cleanUp( e );\r\n            };\r\n\r\n            if ( self.isClosing ) {\r\n                return false;\r\n            }\r\n\r\n            self.isClosing = true;\r\n\r\n            // If beforeClose callback prevents closing, make sure content is centered\r\n            if ( self.trigger( 'beforeClose', e ) === false ) {\r\n                self.isClosing = false;\r\n\r\n                requestAFrame(function() {\r\n                    self.update();\r\n                });\r\n\r\n                return false;\r\n            }\r\n\r\n            // Remove all events\r\n            // If there are multiple instances, they will be set again by \"activate\" method\r\n            self.removeEvents();\r\n\r\n            if ( current.timouts ) {\r\n                clearTimeout( current.timouts );\r\n            }\r\n\r\n            $what    = current.$content;\r\n            effect   = current.opts.animationEffect;\r\n            duration = $.isNumeric( d ) ? d : ( effect ? current.opts.animationDuration : 0 );\r\n\r\n            // Remove other slides\r\n            current.$slide.off( transitionEnd ).removeClass( 'fancybox-slide--complete fancybox-slide--next fancybox-slide--previous fancybox-animated' );\r\n\r\n            current.$slide.siblings().trigger( 'onReset' ).remove();\r\n\r\n            // Trigger animations\r\n            if ( duration ) {\r\n                self.$refs.container.removeClass( 'fancybox-is-open' ).addClass( 'fancybox-is-closing' );\r\n            }\r\n\r\n            // Clean up\r\n            self.hideLoading( current );\r\n\r\n            self.hideControls();\r\n\r\n            self.updateCursor();\r\n\r\n            // Check if possible to zoom-out\r\n            if ( effect === 'zoom' && !( e !== true && $what && duration && current.type === 'image' && !current.hasError && ( end = self.getThumbPos( current ) ) ) ) {\r\n                effect = 'fade';\r\n            }\r\n\r\n            if ( effect === 'zoom' ) {\r\n                $.fancybox.stop( $what );\r\n\r\n                start = $.fancybox.getTranslate( $what );\r\n\r\n                start.width  = start.width  * start.scaleX;\r\n                start.height = start.height * start.scaleY;\r\n\r\n                // Check if we need to animate opacity\r\n                opacity = current.opts.zoomOpacity;\r\n\r\n                if ( opacity == 'auto' ) {\r\n                    opacity = Math.abs( current.width / current.height - end.width / end.height ) > 0.1;\r\n                }\r\n\r\n                if ( opacity ) {\r\n                    end.opacity = 0;\r\n                }\r\n\r\n                start.scaleX = start.width  / end.width;\r\n                start.scaleY = start.height / end.height;\r\n\r\n                start.width  = end.width;\r\n                start.height = end.height;\r\n\r\n                $.fancybox.setTranslate( current.$content, start );\r\n\r\n                forceRedraw( current.$content );\r\n\r\n                $.fancybox.animate( current.$content, end, duration, done );\r\n\r\n                return true;\r\n            }\r\n\r\n            if ( effect && duration ) {\r\n\r\n                // If skip animation\r\n                if ( e === true ) {\r\n                    setTimeout( done, duration );\r\n\r\n                } else {\r\n                    $.fancybox.animate( current.$slide.removeClass( 'fancybox-slide--current' ), 'fancybox-animated fancybox-slide--previous fancybox-fx-' + effect, duration, done );\r\n                }\r\n\r\n            } else {\r\n                done();\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n\r\n        // Final adjustments after removing the instance\r\n        // =============================================\r\n\r\n        cleanUp : function( e ) {\r\n            var self  = this,\r\n                $body = $( 'body' ),\r\n                instance,\r\n                offset;\r\n\r\n            self.current.$slide.trigger( 'onReset' );\r\n\r\n            self.$refs.container.empty().remove();\r\n\r\n            self.trigger( 'afterClose', e );\r\n\r\n            // Place back focus\r\n            if ( self.$lastFocus && !!self.current.opts.backFocus ) {\r\n                self.$lastFocus.focus();\r\n            }\r\n\r\n            self.current = null;\r\n\r\n            // Check if there are other instances\r\n            instance = $.fancybox.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.activate();\r\n\r\n            } else {\r\n\r\n                $W.scrollTop( self.scrollTop ).scrollLeft( self.scrollLeft );\r\n\r\n                $body.removeClass( 'fancybox-active compensate-for-scrollbar' );\r\n\r\n                if ( $body.hasClass( 'fancybox-iosfix' ) ) {\r\n                    offset = parseInt(document.body.style.top, 10);\r\n\r\n                    $body.removeClass( 'fancybox-iosfix' ).css( 'top', '' ).scrollTop( offset * -1 );\r\n                }\r\n\r\n                $( '#fancybox-style-noscroll' ).remove();\r\n\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Call callback and trigger an event\r\n        // ==================================\r\n\r\n        trigger : function( name, slide ) {\r\n            var args  = Array.prototype.slice.call(arguments, 1),\r\n                self  = this,\r\n                obj   = slide && slide.opts ? slide : self.current,\r\n                rez;\r\n\r\n            if ( obj ) {\r\n                args.unshift( obj );\r\n\r\n            } else {\r\n                obj = self;\r\n            }\r\n\r\n            args.unshift( self );\r\n\r\n            if ( $.isFunction( obj.opts[ name ] ) ) {\r\n                rez = obj.opts[ name ].apply( obj, args );\r\n            }\r\n\r\n            if ( rez === false ) {\r\n                return rez;\r\n            }\r\n\r\n            if ( name === 'afterClose' || !self.$refs ) {\r\n                $D.trigger( name + '.fb', args );\r\n\r\n            } else {\r\n                self.$refs.container.trigger( name + '.fb', args );\r\n            }\r\n\r\n        },\r\n\r\n\r\n        // Update infobar values, navigation button states and reveal caption\r\n        // ==================================================================\r\n\r\n        updateControls : function ( force ) {\r\n\r\n            var self = this;\r\n\r\n            var current  = self.current,\r\n                index    = current.index,\r\n                caption  = current.opts.caption,\r\n                $container = self.$refs.container,\r\n                $caption   = self.$refs.caption;\r\n\r\n            // Recalculate content dimensions\r\n            current.$slide.trigger( 'refresh' );\r\n\r\n            self.$caption = caption && caption.length ? $caption.html( caption ) : null;\r\n\r\n            if ( !self.isHiddenControls && !self.isIdle ) {\r\n                self.showControls();\r\n            }\r\n\r\n            // Update info and navigation elements\r\n            $container.find('[data-fancybox-count]').html( self.group.length );\r\n            $container.find('[data-fancybox-index]').html( index + 1 );\r\n\r\n            $container.find('[data-fancybox-prev]').prop( 'disabled', ( !current.opts.loop && index <= 0 ) );\r\n            $container.find('[data-fancybox-next]').prop( 'disabled', ( !current.opts.loop && index >= self.group.length - 1 ) );\r\n\r\n            if ( current.type === 'image' ) {\r\n\r\n                // Update download button source\r\n                $container.find('[data-fancybox-download]').attr( 'href', current.opts.image.src || current.src ).show();\r\n\r\n            } else {\r\n                $container.find('[data-fancybox-download],[data-fancybox-zoom]').hide();\r\n            }\r\n        },\r\n\r\n        // Hide toolbar and caption\r\n        // ========================\r\n\r\n        hideControls : function () {\r\n\r\n            this.isHiddenControls = true;\r\n\r\n            this.$refs.container.removeClass( 'fancybox-show-infobar fancybox-show-toolbar fancybox-show-caption fancybox-show-nav' );\r\n\r\n        },\r\n\r\n        showControls : function() {\r\n            var self = this;\r\n            var opts = self.current ? self.current.opts : self.opts;\r\n            var $container = self.$refs.container;\r\n\r\n            self.isHiddenControls   = false;\r\n            self.idleSecondsCounter = 0;\r\n\r\n            $container\r\n                .toggleClass( 'fancybox-show-toolbar', !!( opts.toolbar && opts.buttons ) )\r\n                .toggleClass( 'fancybox-show-infobar', !!( opts.infobar && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-show-nav',     !!( opts.arrows && self.group.length > 1 ) )\r\n                .toggleClass( 'fancybox-is-modal',     !!opts.modal );\r\n\r\n            if ( self.$caption ) {\r\n                $container.addClass( 'fancybox-show-caption ');\r\n\r\n            } else {\r\n               $container.removeClass( 'fancybox-show-caption' );\r\n           }\r\n\r\n       },\r\n\r\n\r\n       // Toggle toolbar and caption\r\n       // ==========================\r\n\r\n       toggleControls : function() {\r\n           if ( this.isHiddenControls ) {\r\n               this.showControls();\r\n\r\n           } else {\r\n               this.hideControls();\r\n           }\r\n\r\n       },\r\n\r\n\r\n    });\r\n\r\n\r\n    $.fancybox = {\r\n\r\n        version  : \"3.2.8\",\r\n        defaults : defaults,\r\n\r\n\r\n        // Get current instance and execute a command.\r\n        //\r\n        // Examples of usage:\r\n        //\r\n        //   $instance = $.fancybox.getInstance();\r\n        //   $.fancybox.getInstance().jumpTo( 1 );\r\n        //   $.fancybox.getInstance( 'jumpTo', 1 );\r\n        //   $.fancybox.getInstance( function() {\r\n        //       console.info( this.currIndex );\r\n        //   });\r\n        // ======================================================\r\n\r\n        getInstance : function ( command ) {\r\n            var instance = $('.fancybox-container:not(\".fancybox-is-closing\"):last').data( 'FancyBox' );\r\n            var args     = Array.prototype.slice.call(arguments, 1);\r\n\r\n            if ( instance instanceof FancyBox ) {\r\n\r\n                if ( $.type( command ) === 'string' ) {\r\n                    instance[ command ].apply( instance, args );\r\n\r\n                } else if ( $.type( command ) === 'function' ) {\r\n                    command.apply( instance, args );\r\n                }\r\n\r\n                return instance;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n\r\n        // Create new instance\r\n        // ===================\r\n\r\n        open : function ( items, opts, index ) {\r\n            return new FancyBox( items, opts, index );\r\n        },\r\n\r\n\r\n        // Close current or all instances\r\n        // ==============================\r\n\r\n        close : function ( all ) {\r\n            var instance = this.getInstance();\r\n\r\n            if ( instance ) {\r\n                instance.close();\r\n\r\n                // Try to find and close next instance\r\n\r\n                if ( all === true ) {\r\n                    this.close();\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        // Close instances and unbind all events\r\n        // ==============================\r\n\r\n        destroy : function() {\r\n\r\n            this.close( true );\r\n\r\n            $D.off( 'click.fb-start' );\r\n\r\n        },\r\n\r\n\r\n        // Try to detect mobile devices\r\n        // ============================\r\n\r\n        isMobile : document.createTouch !== undefined && /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),\r\n\r\n\r\n        // Detect if 'translate3d' support is available\r\n        // ============================================\r\n\r\n        use3d : (function() {\r\n            var div = document.createElement('div');\r\n\r\n            return window.getComputedStyle && window.getComputedStyle( div ).getPropertyValue('transform') && !(document.documentMode && document.documentMode < 11);\r\n        }()),\r\n\r\n        // Helper function to get current visual state of an element\r\n        // returns array[ top, left, horizontal-scale, vertical-scale, opacity ]\r\n        // =====================================================================\r\n\r\n        getTranslate : function( $el ) {\r\n            var matrix;\r\n\r\n            if ( !$el || !$el.length ) {\r\n                return false;\r\n            }\r\n\r\n            matrix  = $el.eq( 0 ).css('transform');\r\n\r\n            if ( matrix && matrix.indexOf( 'matrix' ) !== -1 ) {\r\n                matrix = matrix.split('(')[1];\r\n                matrix = matrix.split(')')[0];\r\n                matrix = matrix.split(',');\r\n            } else {\r\n                matrix = [];\r\n            }\r\n\r\n            if ( matrix.length ) {\r\n\r\n                // If IE\r\n                if ( matrix.length > 10 ) {\r\n                    matrix = [ matrix[13], matrix[12], matrix[0], matrix[5] ];\r\n\r\n                } else {\r\n                    matrix = [ matrix[5], matrix[4], matrix[0], matrix[3]];\r\n                }\r\n\r\n                matrix = matrix.map(parseFloat);\r\n\r\n            } else {\r\n                matrix = [ 0, 0, 1, 1 ];\r\n\r\n                var transRegex = /\\.*translate\\((.*)px,(.*)px\\)/i;\r\n                var transRez = transRegex.exec( $el.eq( 0 ).attr('style') );\r\n\r\n                if ( transRez ) {\r\n                    matrix[ 0 ] = parseFloat( transRez[2] );\r\n                    matrix[ 1 ] = parseFloat( transRez[1] );\r\n                }\r\n            }\r\n\r\n            return {\r\n                top     : matrix[ 0 ],\r\n                left    : matrix[ 1 ],\r\n                scaleX  : matrix[ 2 ],\r\n                scaleY  : matrix[ 3 ],\r\n                opacity : parseFloat( $el.css('opacity') ),\r\n                width   : $el.width(),\r\n                height  : $el.height()\r\n            };\r\n\r\n        },\r\n\r\n\r\n        // Shortcut for setting \"translate3d\" properties for element\r\n        // Can set be used to set opacity, too\r\n        // ========================================================\r\n\r\n        setTranslate : function( $el, props ) {\r\n            var str  = '';\r\n            var css  = {};\r\n\r\n            if ( !$el || !props ) {\r\n                return;\r\n            }\r\n\r\n            if ( props.left !== undefined || props.top !== undefined ) {\r\n                str = ( props.left === undefined ? $el.position().left : props.left )  + 'px, ' + ( props.top === undefined ? $el.position().top : props.top ) + 'px';\r\n\r\n                if ( this.use3d ) {\r\n                    str = 'translate3d(' + str + ', 0px)';\r\n\r\n                } else {\r\n                    str = 'translate(' + str + ')';\r\n                }\r\n            }\r\n\r\n            if ( props.scaleX !== undefined && props.scaleY !== undefined ) {\r\n                str = (str.length ? str + ' ' : '') + 'scale(' + props.scaleX + ', ' + props.scaleY + ')';\r\n            }\r\n\r\n            if ( str.length ) {\r\n                css.transform = str;\r\n            }\r\n\r\n            if ( props.opacity !== undefined ) {\r\n                css.opacity = props.opacity;\r\n            }\r\n\r\n            if ( props.width !== undefined ) {\r\n                css.width = props.width;\r\n            }\r\n\r\n            if ( props.height !== undefined ) {\r\n                css.height = props.height;\r\n            }\r\n\r\n            return $el.css( css );\r\n        },\r\n\r\n\r\n        // Simple CSS transition handler\r\n        // =============================\r\n\r\n        animate : function ( $el, to, duration, callback, leaveAnimationName ) {\r\n            if ( $.isFunction( duration ) ) {\r\n                callback = duration;\r\n                duration = null;\r\n            }\r\n\r\n            if ( !$.isPlainObject( to ) ) {\r\n                $el.removeAttr('style');\r\n            }\r\n\r\n            $el.on( transitionEnd, function(e) {\r\n\r\n                // Skip events from child elements and z-index change\r\n                if ( e && e.originalEvent && ( !$el.is( e.originalEvent.target ) || e.originalEvent.propertyName == 'z-index' ) ) {\r\n                    return;\r\n                }\r\n\r\n                $.fancybox.stop( $el );\r\n\r\n                if ( $.isPlainObject( to ) ) {\r\n\r\n                    if ( to.scaleX !== undefined && to.scaleY !== undefined ) {\r\n                        $el.css( 'transition-duration', '' );\r\n\r\n                        to.width  = Math.round( $el.width()  * to.scaleX );\r\n                        to.height = Math.round( $el.height() * to.scaleY );\r\n\r\n                        to.scaleX = 1;\r\n                        to.scaleY = 1;\r\n\r\n                        $.fancybox.setTranslate( $el, to );\r\n                    }\r\n\r\n                } else if ( leaveAnimationName !== true ) {\r\n                    $el.removeClass( to );\r\n                }\r\n\r\n                if ( $.isFunction( callback ) ) {\r\n                    callback( e );\r\n                }\r\n\r\n            });\r\n\r\n            if ( $.isNumeric( duration ) ) {\r\n                $el.css( 'transition-duration', duration + 'ms' );\r\n            }\r\n\r\n            if ( $.isPlainObject( to ) ) {\r\n                $.fancybox.setTranslate( $el, to );\r\n\r\n            } else {\r\n                $el.addClass( to );\r\n            }\r\n\r\n            if ( to.scaleX && $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().addClass( 'fancybox-is-scaling' );\r\n            }\r\n\r\n            // Make sure that `transitionend` callback gets fired\r\n            $el.data(\"timer\", setTimeout(function() {\r\n                $el.trigger( 'transitionend' );\r\n            }, duration + 16));\r\n\r\n        },\r\n\r\n        stop : function( $el ) {\r\n            clearTimeout( $el.data(\"timer\") );\r\n\r\n            $el.off( 'transitionend' ).css( 'transition-duration', '' );\r\n\r\n            if ( $el.hasClass( 'fancybox-image-wrap' ) ) {\r\n                $el.parent().removeClass( 'fancybox-is-scaling' );\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // Default click handler for \"fancyboxed\" links\r\n    // ============================================\r\n\r\n    function _run( e ) {\r\n        var $target\t= $( e.currentTarget ),\r\n            opts\t= e.data ? e.data.options : {},\r\n            value\t= $target.attr( 'data-fancybox' ) || '',\r\n            index\t= 0,\r\n            items   = [];\r\n\r\n        // Avoid opening multiple times\r\n        if ( e.isDefaultPrevented() ) {\r\n            return;\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Get all related items and find index for clicked one\r\n        if ( value ) {\r\n            items = opts.selector ? $( opts.selector ) : ( e.data ? e.data.items : [] );\r\n            items = items.length ? items.filter( '[data-fancybox=\"' + value + '\"]' ) : $( '[data-fancybox=\"' + value + '\"]' );\r\n\r\n            index = items.index( $target );\r\n\r\n            // Sometimes current item can not be found\r\n            // (for example, when slider clones items)\r\n            if ( index < 0 ) {\r\n                index = 0;\r\n            }\r\n\r\n        } else {\r\n            items = [ $target ];\r\n        }\r\n\r\n        $.fancybox.open( items, opts, index );\r\n    }\r\n\r\n\r\n    // Create a jQuery plugin\r\n    // ======================\r\n\r\n    $.fn.fancybox = function (options) {\r\n        var selector;\r\n\r\n        options  = options || {};\r\n        selector = options.selector || false;\r\n\r\n        if ( selector ) {\r\n\r\n            $( 'body' ).off( 'click.fb-start', selector ).on( 'click.fb-start', selector, {\r\n                options : options\r\n            }, _run );\r\n\r\n        } else {\r\n\r\n            this.off( 'click.fb-start' ).on( 'click.fb-start', {\r\n                items   : this,\r\n                options : options\r\n            }, _run);\r\n\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Self initializing plugin\r\n    // ========================\r\n\r\n    $D.on( 'click.fb-start', '[data-fancybox]', _run );\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Media\r\n// Adds additional media type support\r\n//\r\n// ==========================================================================\r\n;(function ($) {\r\n\r\n\t'use strict';\r\n\r\n\t// Formats matching url to final form\r\n\r\n\tvar format = function (url, rez, params) {\r\n\t\tif ( !url ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tparams = params || '';\r\n\r\n\t\tif ( $.type(params) === \"object\" ) {\r\n\t\t\tparams = $.param(params, true);\r\n\t\t}\r\n\r\n\t\t$.each(rez, function (key, value) {\r\n\t\t\turl = url.replace('$' + key, value || '');\r\n\t\t});\r\n\r\n\t\tif (params.length) {\r\n\t\t\turl += (url.indexOf('?') > 0 ? '&' : '?') + params;\r\n\t\t}\r\n\r\n\t\treturn url;\r\n\t};\r\n\r\n\t// Object containing properties for each media type\r\n\r\n\tvar defaults = {\r\n\t\tyoutube : {\r\n\t\t\tmatcher : /(youtube\\.com|youtu\\.be|youtube\\-nocookie\\.com)\\/(watch\\?(.*&)?v=|v\\/|u\\/|embed\\/?)?(videoseries\\?list=(.*)|[\\w-]{11}|\\?listType=(.*)&list=(.*))(.*)/i,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\tautohide : 1,\r\n\t\t\t\tfs  : 1,\r\n\t\t\t\trel : 0,\r\n\t\t\t\thd  : 1,\r\n\t\t\t\twmode : 'transparent',\r\n\t\t\t\tenablejsapi : 1,\r\n\t\t\t\thtml5 : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 8,\r\n\t\t\ttype  : 'iframe',\r\n\t\t\turl   : '//www.youtube.com/embed/$4',\r\n\t\t\tthumb : '//img.youtube.com/vi/$4/hqdefault.jpg'\r\n\t\t},\r\n\r\n\t\tvimeo : {\r\n\t\t\tmatcher : /^.+vimeo.com\\/(.*\\/)?([\\d]+)(.*)?/,\r\n\t\t\tparams  : {\r\n\t\t\t\tautoplay : 1,\r\n\t\t\t\thd : 1,\r\n\t\t\t\tshow_title    : 1,\r\n\t\t\t\tshow_byline   : 1,\r\n\t\t\t\tshow_portrait : 0,\r\n\t\t\t\tfullscreen    : 1,\r\n\t\t\t\tapi : 1\r\n\t\t\t},\r\n\t\t\tparamPlace : 3,\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl : '//player.vimeo.com/video/$2'\r\n\t\t},\r\n\r\n\t\tmetacafe : {\r\n\t\t\tmatcher : /metacafe.com\\/watch\\/(\\d+)\\/(.*)?/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//www.metacafe.com/embed/$1/?ap=1'\r\n\t\t},\r\n\r\n\t\tdailymotion : {\r\n\t\t\tmatcher : /dailymotion.com\\/video\\/(.*)\\/?(.*)/,\r\n\t\t\tparams : {\r\n\t\t\t\tadditionalInfos : 0,\r\n\t\t\t\tautoStart : 1\r\n\t\t\t},\r\n\t\t\ttype : 'iframe',\r\n\t\t\turl  : '//www.dailymotion.com/embed/video/$1'\r\n\t\t},\r\n\r\n\t\tvine : {\r\n\t\t\tmatcher : /vine.co\\/v\\/([a-zA-Z0-9\\?\\=\\-]+)/,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : '//vine.co/v/$1/embed/simple'\r\n\t\t},\r\n\r\n\t\tinstagram : {\r\n\t\t\tmatcher : /(instagr\\.am|instagram\\.com)\\/p\\/([a-zA-Z0-9_\\-]+)\\/?/i,\r\n\t\t\ttype    : 'image',\r\n\t\t\turl     : '//$1/p/$2/media/?size=l'\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// http://maps.google.com/?ll=48.857995,2.294297&spn=0.007666,0.021136&t=m&z=16\r\n\t\t// https://www.google.com/maps/@37.7852006,-122.4146355,14.65z\r\n\t\t// https://www.google.com/maps/place/Googleplex/@37.4220041,-122.0833494,17z/data=!4m5!3m4!1s0x0:0x6c296c66619367e0!8m2!3d37.4219998!4d-122.0840572\r\n\t\tgmap_place : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(((maps\\/(place\\/(.*)\\/)?\\@(.*),(\\d+.?\\d+?)z))|(\\?ll=))(.*)?/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/?ll=' + ( rez[9] ? rez[9] + '&z=' + Math.floor(  rez[10]  ) + ( rez[12] ? rez[12].replace(/^\\//, \"&\") : '' )  : rez[12] ) + '&output=' + ( rez[12] && rez[12].indexOf('layer=c') > 0 ? 'svembed' : 'embed' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// Examples:\r\n\t\t// https://www.google.com/maps/search/Empire+State+Building/\r\n\t\t// https://www.google.com/maps/search/?api=1&query=centurylink+field\r\n\t\t// https://www.google.com/maps/search/?api=1&query=47.5951518,-122.3316393\r\n\t\tgmap_search : {\r\n\t\t\tmatcher : /(maps\\.)?google\\.([a-z]{2,3}(\\.[a-z]{2})?)\\/(maps\\/search\\/)(.*)/i,\r\n\t\t\ttype    : 'iframe',\r\n\t\t\turl     : function (rez) {\r\n\t\t\t\treturn '//maps.google.' + rez[2] + '/maps?q=' + rez[5].replace('query=', 'q=').replace('api=1', '') + '&output=embed';\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on('objectNeedsType.fb', function (e, instance, item) {\r\n\r\n\t\tvar url\t = item.src || '',\r\n\t\t\ttype = false,\r\n\t\t\tmedia,\r\n\t\t\tthumb,\r\n\t\t\trez,\r\n\t\t\tparams,\r\n\t\t\turlParams,\r\n\t\t\tparamObj,\r\n\t\t\tprovider;\r\n\r\n\t\tmedia = $.extend( true, {}, defaults, item.opts.media );\r\n\r\n\t\t// Look for any matching media type\r\n\t\t$.each(media, function ( providerName, providerOpts ) {\r\n\t\t\trez = url.match( providerOpts.matcher );\r\n\r\n\t\t\tif ( !rez ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttype     = providerOpts.type;\r\n\t\t\tparamObj = {};\r\n\r\n\t\t\tif ( providerOpts.paramPlace && rez[ providerOpts.paramPlace ] ) {\r\n\t\t\t\turlParams = rez[ providerOpts.paramPlace ];\r\n\r\n\t\t\t\tif ( urlParams[ 0 ] == '?' ) {\r\n\t\t\t\t\turlParams = urlParams.substring(1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\turlParams = urlParams.split('&');\r\n\r\n\t\t\t\tfor ( var m = 0; m < urlParams.length; ++m ) {\r\n\t\t\t\t\tvar p = urlParams[ m ].split('=', 2);\r\n\r\n\t\t\t\t\tif ( p.length == 2 ) {\r\n\t\t\t\t\t\tparamObj[ p[0] ] = decodeURIComponent( p[1].replace(/\\+/g, \" \") );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tparams = $.extend( true, {}, providerOpts.params, item.opts[ providerName ], paramObj );\r\n\r\n\t\t\turl   = $.type( providerOpts.url ) === \"function\" ? providerOpts.url.call( this, rez, params, item ) : format( providerOpts.url, rez, params );\r\n\t\t\tthumb = $.type( providerOpts.thumb ) === \"function\" ? providerOpts.thumb.call( this, rez, params, item ) : format( providerOpts.thumb, rez );\r\n\r\n\t\t\tif ( providerName === 'vimeo' ) {\r\n\t\t\t\turl = url.replace('&%23', '#');\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// If it is found, then change content type and update the url\r\n\r\n\t\tif ( type ) {\r\n\t\t\titem.src  = url;\r\n\t\t\titem.type = type;\r\n\r\n\t\t\tif ( !item.opts.thumb && !( item.opts.$thumb && item.opts.$thumb.length ) ) {\r\n\t\t\t\titem.opts.thumb = thumb;\r\n\t\t\t}\r\n\r\n\t\t\tif ( type === 'iframe' ) {\r\n\t\t\t\t$.extend(true, item.opts, {\r\n\t\t\t\t\tiframe : {\r\n\t\t\t\t\t\tpreload : false,\r\n\t\t\t\t\t\tattr : {\r\n\t\t\t\t\t\t\tscrolling : \"no\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\titem.contentProvider = provider;\r\n\r\n\t\t\t\titem.opts.slideClass += ' fancybox-slide--' + ( provider == 'gmap_place' || provider == 'gmap_search' ? 'map' : 'video' );\r\n\t\t\t}\r\n\r\n\t\t} else if ( url ) {\r\n\t\t\titem.type = item.opts.defaultType;\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Guestures\r\n// Adds touch guestures, handles click and tap events\r\n//\r\n// ==========================================================================\r\n;(function (window, document, $) {\r\n\t'use strict';\r\n\r\n\tvar requestAFrame = (function () {\r\n        return window.requestAnimationFrame ||\r\n                window.webkitRequestAnimationFrame ||\r\n                window.mozRequestAnimationFrame ||\r\n                window.oRequestAnimationFrame ||\r\n                // if all else fails, use setTimeout\r\n                function (callback) {\r\n                    return window.setTimeout(callback, 1000 / 60);\r\n                };\r\n    })();\r\n\r\n\r\n    var cancelAFrame = (function () {\r\n        return window.cancelAnimationFrame ||\r\n                window.webkitCancelAnimationFrame ||\r\n                window.mozCancelAnimationFrame ||\r\n                window.oCancelAnimationFrame ||\r\n                function (id) {\r\n                    window.clearTimeout(id);\r\n                };\r\n    })();\r\n\r\n\r\n\tvar pointers = function( e ) {\r\n\t\tvar result = [];\r\n\r\n\t\te = e.originalEvent || e || window.e;\r\n\t\te = e.touches && e.touches.length ? e.touches : ( e.changedTouches && e.changedTouches.length ? e.changedTouches : [ e ] );\r\n\r\n\t\tfor ( var key in e ) {\r\n\r\n\t\t\tif ( e[ key ].pageX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].pageX, y : e[ key ].pageY } );\r\n\r\n\t\t\t} else if ( e[ key ].clientX ) {\r\n\t\t\t\tresult.push( { x : e[ key ].clientX, y : e[ key ].clientY } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tvar distance = function( point2, point1, what ) {\r\n\t\tif ( !point1 || !point2 ) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tif ( what === 'x' ) {\r\n\t\t\treturn point2.x - point1.x;\r\n\r\n\t\t} else if ( what === 'y' ) {\r\n\t\t\treturn point2.y - point1.y;\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( Math.pow( point2.x - point1.x, 2 ) + Math.pow( point2.y - point1.y, 2 ) );\r\n\t};\r\n\r\n\tvar isClickable = function( $el ) {\r\n\t\tif ( $el.is('a,area,button,[role=\"button\"],input,label,select,summary,textarea') || $.isFunction( $el.get(0).onclick ) || $el.data('selectable') ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// Check for attributes like data-fancybox-next or data-fancybox-close\r\n\t\tfor ( var i = 0, atts = $el[0].attributes, n = atts.length; i < n; i++ ) {\r\n            if ( atts[i].nodeName.substr(0, 14) === 'data-fancybox-' ) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n\t \treturn false;\r\n\t};\r\n\r\n\tvar hasScrollbars = function( el ) {\r\n\t\tvar overflowY = window.getComputedStyle( el )['overflow-y'];\r\n\t\tvar overflowX = window.getComputedStyle( el )['overflow-x'];\r\n\r\n\t\tvar vertical   = (overflowY === 'scroll' || overflowY === 'auto') && el.scrollHeight > el.clientHeight;\r\n\t\tvar horizontal = (overflowX === 'scroll' || overflowX === 'auto') && el.scrollWidth > el.clientWidth;\r\n\r\n\t\treturn vertical || horizontal;\r\n\t};\r\n\r\n\tvar isScrollable = function ( $el ) {\r\n\t\tvar rez = false;\r\n\r\n\t\twhile ( true ) {\r\n\t\t\trez\t= hasScrollbars( $el.get(0) );\r\n\r\n\t\t\tif ( rez ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t$el = $el.parent();\r\n\r\n\t\t\tif ( !$el.length || $el.hasClass( 'fancybox-stage' ) || $el.is( 'body' ) ) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn rez;\r\n\t};\r\n\r\n\r\n\tvar Guestures = function ( instance ) {\r\n\t\tvar self = this;\r\n\r\n\t\tself.instance = instance;\r\n\r\n\t\tself.$bg        = instance.$refs.bg;\r\n\t\tself.$stage     = instance.$refs.stage;\r\n\t\tself.$container = instance.$refs.container;\r\n\r\n\t\tself.destroy();\r\n\r\n\t\tself.$container.on( 'touchstart.fb.touch mousedown.fb.touch', $.proxy(self, 'ontouchstart') );\r\n\t};\r\n\r\n\tGuestures.prototype.destroy = function() {\r\n\t\tthis.$container.off( '.fb.touch' );\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchstart = function( e ) {\r\n\t\tvar self = this;\r\n\r\n\t\tvar $target  = $( e.target );\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\t\tvar $content = current.$content;\r\n\r\n\t\tvar isTouchDevice = ( e.type == 'touchstart' );\r\n\r\n\t\t// Do not respond to both events\r\n\t\tif ( isTouchDevice ) {\r\n\t        self.$container.off( 'mousedown.fb.touch' );\r\n\t    }\r\n\r\n\t\t// Ignore clicks while zooming or closing\r\n\t\tif ( !current || self.instance.isAnimating || self.instance.isClosing ) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore taping on links, buttons, input elements\r\n\t\tif ( !$target.length || isClickable( $target ) || isClickable( $target.parent() ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Ignore clicks on the scrollbar\r\n\t\tif ( e.originalEvent.clientX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.startPoints = pointers( e );\r\n\r\n\t\tif ( !self.startPoints ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.$target  = $target;\r\n\t\tself.$content = $content;\r\n\t\tself.canTap   = true;\r\n\t\tself.opts     = current.opts.touch;\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\t$(document).on( isTouchDevice ? 'touchend.fb.touch touchcancel.fb.touch' : 'mouseup.fb.touch mouseleave.fb.touch',  $.proxy(self, \"ontouchend\"));\r\n\t\t$(document).on( isTouchDevice ? 'touchmove.fb.touch' : 'mousemove.fb.touch',  $.proxy(self, \"ontouchmove\"));\r\n\r\n\t\tif ( !(self.opts || instance.canPan() ) || !( $target.is( self.$stage ) || self.$stage.find( $target ).length ) ) {\r\n\r\n\t\t\t// Prevent ghosting\r\n\t\t\tif ( $target.is('img') ) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\te.stopPropagation();\r\n\r\n\t\tif ( !( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\r\n\t\tself.canvasWidth  = Math.round( current.$slide[0].clientWidth );\r\n\t\tself.canvasHeight = Math.round( current.$slide[0].clientHeight );\r\n\r\n\t\tself.startTime = new Date().getTime();\r\n\t\tself.distanceX = self.distanceY = self.distance = 0;\r\n\r\n\t\tself.isPanning = false;\r\n\t\tself.isSwiping = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tself.sliderStartPos  = self.sliderLastPos || { top: 0, left: 0 };\r\n\t\tself.contentStartPos = $.fancybox.getTranslate( self.$content );\r\n\t\tself.contentLastPos  = null;\r\n\r\n\t\tif ( self.startPoints.length === 1 && !self.isZooming ) {\r\n\t\t\tself.canTap = true;\r\n\r\n\t\t\tif ( current.type === 'image' && ( self.contentStartPos.width > self.canvasWidth + 1 || self.contentStartPos.height > self.canvasHeight + 1 ) ) {\r\n\r\n\t\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\t\tself.isPanning = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.isSwiping = true;\r\n\t\t\t}\r\n\r\n\t\t\tself.$container.addClass( 'fancybox-controls--isGrabbing' );\r\n\t\t}\r\n\r\n\t\tif ( self.startPoints.length === 2 && !instance.isAnimating && !current.hasError && current.type === 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\t\t\tself.isZooming = true;\r\n\r\n\t\t\tself.isSwiping = false;\r\n\t\t\tself.isPanning = false;\r\n\r\n\t\t\t$.fancybox.stop( self.$content );\r\n\r\n\t\t\tself.$content.css( 'transition-duration', '' );\r\n\r\n\t\t\tself.centerPointStartX = ( ( self.startPoints[0].x + self.startPoints[1].x ) * 0.5 ) - $(window).scrollLeft();\r\n\t\t\tself.centerPointStartY = ( ( self.startPoints[0].y + self.startPoints[1].y ) * 0.5 ) - $(window).scrollTop();\r\n\r\n\t\t\tself.percentageOfImageAtPinchPointX = ( self.centerPointStartX - self.contentStartPos.left ) / self.contentStartPos.width;\r\n\t\t\tself.percentageOfImageAtPinchPointY = ( self.centerPointStartY - self.contentStartPos.top  ) / self.contentStartPos.height;\r\n\r\n\t\t\tself.startDistanceBetweenFingers = distance( self.startPoints[0], self.startPoints[1] );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchmove = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tself.newPoints = pointers( e );\r\n\r\n\t\tif ( $.fancybox.isMobile && ( isScrollable( self.$target ) || isScrollable( self.$target.parent() ) ) ) {\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tself.canTap = false;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( !( self.opts || self.instance.canPan() ) || !self.newPoints || !self.newPoints.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tself.distanceX = distance( self.newPoints[0], self.startPoints[0], 'x' );\r\n\t\tself.distanceY = distance( self.newPoints[0], self.startPoints[0], 'y' );\r\n\r\n\t\tself.distance = distance( self.newPoints[0], self.startPoints[0] );\r\n\r\n\t\t// Skip false ontouchmove events (Chrome)\r\n\t\tif ( self.distance > 0 && !self.tapped ) {\r\n\r\n\t\t\tif ( !( self.$target.is( self.$stage ) || self.$stage.find( self.$target ).length ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\tif ( self.isSwiping ) {\r\n\t\t\t\tself.onSwipe();\r\n\r\n\t\t\t} else if ( self.isPanning ) {\r\n\t\t\t\tself.onPan();\r\n\r\n\t\t\t} else if ( self.isZooming ) {\r\n\t\t\t\tself.onZoom();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onSwipe = function() {\r\n\r\n\t\tvar self = this,\r\n\t\t\tswiping = self.isSwiping,\r\n\t\t\tleft    = self.sliderStartPos.left || 0,\r\n\t\t\tangle;\r\n\r\n\t\tif ( swiping === true ) {\r\n\r\n\t\t\t// We need at least 10px distance to correctly calculate an angle\r\n\t\t\tif ( Math.abs( self.distance ) > 10 )  {\r\n\r\n\t\t\t\tself.canTap = false;\r\n\r\n\t\t\t\tif ( self.instance.group.length < 2 && self.opts.vertical ) {\r\n\t\t\t\t\tself.isSwiping  = 'y';\r\n\r\n\t\t\t\t} else if ( self.instance.isDragging || self.opts.vertical === false || ( self.opts.vertical === 'auto' && $( window ).width() > 800 ) ) {\r\n\t\t\t\t\tself.isSwiping  = 'x';\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tangle = Math.abs( Math.atan2( self.distanceY, self.distanceX ) * 180 / Math.PI );\r\n\r\n\t\t\t\t\tself.isSwiping = ( angle > 45 && angle < 135 ) ? 'y' : 'x';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself.instance.isDragging = self.isSwiping;\r\n\r\n\t\t\t\t// Reset points to avoid jumping, because we dropped first swipes to calculate the angle\r\n\t\t\t\tself.startPoints = self.newPoints;\r\n\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\t$.fancybox.stop( slide.$slide );\r\n\r\n\t\t\t\t\tslide.$slide.css( 'transition-duration', '' );\r\n\r\n\t\t\t\t\tslide.inTransition = false;\r\n\r\n\t\t\t\t\tif ( slide.pos === self.instance.current.pos ) {\r\n\t\t\t\t\t\tself.sliderStartPos.left = $.fancybox.getTranslate( slide.$slide ).left;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Stop slideshow\r\n\t\t\t\tif ( self.instance.SlideShow && self.instance.SlideShow.isActive ) {\r\n\t\t\t\t\tself.instance.SlideShow.stop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( swiping == 'x' ) {\r\n\r\n\t\t\t// Sticky edges\r\n\t\t\tif ( self.distanceX > 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === 0 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left + Math.pow( self.distanceX, 0.8 );\r\n\r\n\t\t\t} else if ( self.distanceX < 0 && ( self.instance.group.length < 2 || ( self.instance.current.index === self.instance.group.length - 1 && !self.instance.current.opts.loop ) ) ) {\r\n\t\t\t\tleft = left - Math.pow( -self.distanceX, 0.8 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\tleft = left + self.distanceX;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tself.sliderLastPos = {\r\n\t\t\ttop  : swiping == 'x' ? 0 : self.sliderStartPos.top + self.distanceY,\r\n\t\t\tleft : left\r\n\t\t};\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\r\n\t\t\tif ( self.sliderLastPos ) {\r\n\t\t\t\t$.each(self.instance.slides, function( index, slide ) {\r\n\t\t\t\t\tvar pos = slide.pos - self.instance.currPos;\r\n\r\n\t\t\t\t\t$.fancybox.setTranslate( slide.$slide, {\r\n\t\t\t\t\t\ttop  : self.sliderLastPos.top,\r\n\t\t\t\t\t\tleft : self.sliderLastPos.left + ( pos * self.canvasWidth ) + ( pos * slide.opts.gutter )\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.$container.addClass( 'fancybox-is-sliding' );\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onPan = function() {\r\n\r\n\t\tvar self = this,\r\n\t\t\tnewOffsetX,\r\n\t\t\tnewOffsetY,\r\n\t\t\tnewPos;\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tif ( self.contentStartPos.width > self.canvasWidth ) {\r\n\t\t\tnewOffsetX = self.contentStartPos.left + self.distanceX;\r\n\r\n\t\t} else {\r\n\t\t\tnewOffsetX = self.contentStartPos.left;\r\n\t\t}\r\n\r\n\t\tnewOffsetY = self.contentStartPos.top + self.distanceY;\r\n\r\n\t\tnewPos = self.limitMovement( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\tnewPos.scaleX = self.contentStartPos.scaleX;\r\n\t\tnewPos.scaleY = self.contentStartPos.scaleY;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\t};\r\n\r\n\t// Make panning sticky to the edges\r\n\tGuestures.prototype.limitMovement = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar minTranslateX, minTranslateY, maxTranslateX, maxTranslateY;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar distanceX = self.distanceX;\r\n\t\tvar distanceY = self.distanceY;\r\n\r\n\t\t// Slow down proportionally to traveled distance\r\n\r\n\t\tminTranslateX = Math.max(0, canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tminTranslateY = Math.max(0, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tmaxTranslateX = Math.min( canvasWidth  - newWidth,  canvasWidth  * 0.5 - newWidth  * 0.5 );\r\n\t\tmaxTranslateY = Math.min( canvasHeight - newHeight, canvasHeight * 0.5 - newHeight * 0.5 );\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\r\n\t\t\t//   ->\r\n\t\t\tif ( distanceX > 0 && newOffsetX > minTranslateX ) {\r\n\t\t\t\tnewOffsetX = minTranslateX - 1 + Math.pow( -minTranslateX + currentOffsetX + distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//    <-\r\n\t\t\tif ( distanceX  < 0 && newOffsetX < maxTranslateX ) {\r\n\t\t\t\tnewOffsetX = maxTranslateX + 1 - Math.pow( maxTranslateX - currentOffsetX - distanceX, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\r\n\t\t\t//   \\/\r\n\t\t\tif ( distanceY > 0 && newOffsetY > minTranslateY ) {\r\n\t\t\t\tnewOffsetY = minTranslateY - 1 + Math.pow(-minTranslateY + currentOffsetY + distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t\t//   /\\\r\n\t\t\tif ( distanceY < 0 && newOffsetY < maxTranslateY ) {\r\n\t\t\t\tnewOffsetY = maxTranslateY + 1 - Math.pow ( maxTranslateY - currentOffsetY - distanceY, 0.8 ) || 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.limitPosition = function( newOffsetX, newOffsetY, newWidth, newHeight ) {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar canvasWidth  = self.canvasWidth;\r\n\t\tvar canvasHeight = self.canvasHeight;\r\n\r\n\t\tif ( newWidth > canvasWidth ) {\r\n\t\t\tnewOffsetX = newOffsetX > 0 ? 0 : newOffsetX;\r\n\t\t\tnewOffsetX = newOffsetX < canvasWidth - newWidth ? canvasWidth - newWidth : newOffsetX;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center horizontally\r\n\t\t\tnewOffsetX = Math.max( 0, canvasWidth / 2 - newWidth / 2 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newHeight > canvasHeight ) {\r\n\t\t\tnewOffsetY = newOffsetY > 0 ? 0 : newOffsetY;\r\n\t\t\tnewOffsetY = newOffsetY < canvasHeight - newHeight ? canvasHeight - newHeight : newOffsetY;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Center vertically\r\n\t\t\tnewOffsetY = Math.max( 0, canvasHeight / 2 - newHeight / 2 );\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop  : newOffsetY,\r\n\t\t\tleft : newOffsetX\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onZoom = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\t// Calculate current distance between points to get pinch ratio and new width and height\r\n\r\n\t\tvar currentWidth  = self.contentStartPos.width;\r\n\t\tvar currentHeight = self.contentStartPos.height;\r\n\r\n\t\tvar currentOffsetX = self.contentStartPos.left;\r\n\t\tvar currentOffsetY = self.contentStartPos.top;\r\n\r\n\t\tvar endDistanceBetweenFingers = distance( self.newPoints[0], self.newPoints[1] );\r\n\r\n\t\tvar pinchRatio = endDistanceBetweenFingers / self.startDistanceBetweenFingers;\r\n\r\n\t\tvar newWidth  = Math.floor( currentWidth  * pinchRatio );\r\n\t\tvar newHeight = Math.floor( currentHeight * pinchRatio );\r\n\r\n\t\t// This is the translation due to pinch-zooming\r\n\t\tvar translateFromZoomingX = (currentWidth  - newWidth)  * self.percentageOfImageAtPinchPointX;\r\n\t\tvar translateFromZoomingY = (currentHeight - newHeight) * self.percentageOfImageAtPinchPointY;\r\n\r\n\t\t//Point between the two touches\r\n\r\n\t\tvar centerPointEndX = ((self.newPoints[0].x + self.newPoints[1].x) / 2) - $(window).scrollLeft();\r\n\t\tvar centerPointEndY = ((self.newPoints[0].y + self.newPoints[1].y) / 2) - $(window).scrollTop();\r\n\r\n\t\t// And this is the translation due to translation of the centerpoint\r\n\t\t// between the two fingers\r\n\r\n\t\tvar translateFromTranslatingX = centerPointEndX - self.centerPointStartX;\r\n\t\tvar translateFromTranslatingY = centerPointEndY - self.centerPointStartY;\r\n\r\n\t\t// The new offset is the old/current one plus the total translation\r\n\r\n\t\tvar newOffsetX = currentOffsetX + ( translateFromZoomingX + translateFromTranslatingX );\r\n\t\tvar newOffsetY = currentOffsetY + ( translateFromZoomingY + translateFromTranslatingY );\r\n\r\n\t\tvar newPos = {\r\n\t\t\ttop    : newOffsetY,\r\n\t\t\tleft   : newOffsetX,\r\n\t\t\tscaleX : self.contentStartPos.scaleX * pinchRatio,\r\n\t\t\tscaleY : self.contentStartPos.scaleY * pinchRatio\r\n\t\t};\r\n\r\n\t\tself.canTap = false;\r\n\r\n\t\tself.newWidth  = newWidth;\r\n\t\tself.newHeight = newHeight;\r\n\r\n\t\tself.contentLastPos = newPos;\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.requestId = requestAFrame(function() {\r\n\t\t\t$.fancybox.setTranslate( self.$content, self.contentLastPos );\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.ontouchend = function( e ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar dMs  = Math.max( (new Date().getTime() ) - self.startTime, 1);\r\n\r\n\t\tvar swiping = self.isSwiping;\r\n\t\tvar panning = self.isPanning;\r\n\t\tvar zooming = self.isZooming;\r\n\r\n\t\tself.endPoints = pointers( e );\r\n\r\n\t\tself.$container.removeClass( 'fancybox-controls--isGrabbing' );\r\n\r\n\t\t$(document).off( '.fb.touch' );\r\n\r\n\t\tif ( self.requestId ) {\r\n\t\t\tcancelAFrame( self.requestId );\r\n\r\n\t\t\tself.requestId = null;\r\n\t\t}\r\n\r\n\t\tself.isSwiping = false;\r\n\t\tself.isPanning = false;\r\n\t\tself.isZooming = false;\r\n\r\n\t\tself.instance.isDragging = false;\r\n\r\n\t\tif ( self.canTap )  {\r\n\t\t\treturn self.onTap( e );\r\n\t\t}\r\n\r\n\t\tself.speed = 366;\r\n\r\n\t\t// Speed in px/ms\r\n\t\tself.velocityX = self.distanceX / dMs * 0.5;\r\n\t\tself.velocityY = self.distanceY / dMs * 0.5;\r\n\r\n\t\tself.speedX = Math.max( self.speed * 0.5, Math.min( self.speed * 1.5, ( 1 / Math.abs( self.velocityX ) ) * self.speed ) );\r\n\r\n\t\tif ( panning ) {\r\n\t\t\tself.endPanning();\r\n\r\n\t\t} else if ( zooming ) {\r\n\t\t\tself.endZooming();\r\n\r\n\t\t} else {\r\n\t\t\tself.endSwiping( swiping );\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t};\r\n\r\n\tGuestures.prototype.endSwiping = function( swiping ) {\r\n\r\n\t\tvar self = this;\r\n\t\tvar ret = false;\r\n\r\n\t\tself.sliderLastPos = null;\r\n\r\n\t\t// Close if swiped vertically / navigate if horizontally\r\n\t\tif ( swiping == 'y' && Math.abs( self.distanceY ) > 50 ) {\r\n\r\n\t\t\t// Continue vertical movement\r\n\t\t\t$.fancybox.animate( self.instance.current.$slide, {\r\n\t\t\t\ttop     : self.sliderStartPos.top + self.distanceY + ( self.velocityY * 150 ),\r\n\t\t\t\topacity : 0\r\n\t\t\t}, 150 );\r\n\r\n\t\t\tret = self.instance.close( true, 300 );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX > 50 && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.previous( self.speedX );\r\n\r\n\t\t} else if ( swiping == 'x' && self.distanceX < -50  && self.instance.group.length > 1 ) {\r\n\t\t\tret = self.instance.next( self.speedX );\r\n\t\t}\r\n\r\n\t\tif ( ret === false && ( swiping == 'x' || swiping == 'y' ) ) {\r\n\t\t\tself.instance.jumpTo( self.instance.current.index, 150 );\r\n\t\t}\r\n\r\n\t\tself.$container.removeClass( 'fancybox-is-sliding' );\r\n\r\n\t};\r\n\r\n\t// Limit panning from edges\r\n\t// ========================\r\n\r\n\tGuestures.prototype.endPanning = function() {\r\n\r\n\t\tvar self = this;\r\n\t\tvar newOffsetX, newOffsetY, newPos;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( self.opts.momentum === false ) {\r\n\t\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Continue movement\r\n\t\t\tnewOffsetX = self.contentLastPos.left + ( self.velocityX * self.speed );\r\n\t\t\tnewOffsetY = self.contentLastPos.top  + ( self.velocityY * self.speed );\r\n\t\t}\r\n\r\n\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, self.contentStartPos.width, self.contentStartPos.height );\r\n\r\n\t\t newPos.width  = self.contentStartPos.width;\r\n\t\t newPos.height = self.contentStartPos.height;\r\n\r\n\t\t$.fancybox.animate( self.$content, newPos, 330 );\r\n\t};\r\n\r\n\r\n\tGuestures.prototype.endZooming = function() {\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar current = self.instance.current;\r\n\r\n\t\tvar newOffsetX, newOffsetY, newPos, reset;\r\n\r\n\t\tvar newWidth  = self.newWidth;\r\n\t\tvar newHeight = self.newHeight;\r\n\r\n\t\tif ( !self.contentLastPos ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tnewOffsetX = self.contentLastPos.left;\r\n\t\tnewOffsetY = self.contentLastPos.top;\r\n\r\n\t\treset = {\r\n\t\t   \ttop    : newOffsetY,\r\n\t\t   \tleft   : newOffsetX,\r\n\t\t   \twidth  : newWidth,\r\n\t\t   \theight : newHeight,\r\n\t\t\tscaleX : 1,\r\n\t\t\tscaleY : 1\r\n\t   };\r\n\r\n\t   // Reset scalex/scaleY values; this helps for perfomance and does not break animation\r\n\t   $.fancybox.setTranslate( self.$content, reset );\r\n\r\n\t\tif ( newWidth < self.canvasWidth && newHeight < self.canvasHeight ) {\r\n\t\t\tself.instance.scaleToFit( 150 );\r\n\r\n\t\t} else if ( newWidth > current.width || newHeight > current.height ) {\r\n\t\t\tself.instance.scaleToActual( self.centerPointStartX, self.centerPointStartY, 150 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewPos = self.limitPosition( newOffsetX, newOffsetY, newWidth, newHeight );\r\n\r\n\t\t\t// Switch from scale() to width/height or animation will not work correctly\r\n\t\t\t$.fancybox.setTranslate( self.content, $.fancybox.getTranslate( self.$content ) );\r\n\r\n\t\t\t$.fancybox.animate( self.$content, newPos, 150 );\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tGuestures.prototype.onTap = function(e) {\r\n\t\tvar self    = this;\r\n\t\tvar $target = $( e.target );\r\n\r\n\t\tvar instance = self.instance;\r\n\t\tvar current  = instance.current;\r\n\r\n\t\tvar endPoints = ( e && pointers( e ) ) || self.startPoints;\r\n\r\n\t\tvar tapX = endPoints[0] ? endPoints[0].x - self.$stage.offset().left : 0;\r\n\t\tvar tapY = endPoints[0] ? endPoints[0].y - self.$stage.offset().top  : 0;\r\n\r\n\t\tvar where;\r\n\r\n\t\tvar process = function ( prefix ) {\r\n\r\n\t\t\tvar action = current.opts[ prefix ];\r\n\r\n\t\t\tif ( $.isFunction( action ) ) {\r\n\t\t\t\taction = action.apply( instance, [ current, e ] );\r\n\t\t\t}\r\n\r\n\t\t\tif ( !action) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase \"close\" :\r\n\r\n\t\t\t\t\tinstance.close( self.startEvent );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"toggleControls\" :\r\n\r\n\t\t\t\t\tinstance.toggleControls( true );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"next\" :\r\n\r\n\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"nextOrClose\" :\r\n\r\n\t\t\t\t\tif ( instance.group.length > 1 ) {\r\n\t\t\t\t\t\tinstance.next();\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"zoom\" :\r\n\r\n\t\t\t\t\tif ( current.type == 'image' && ( current.isLoaded || current.$ghost ) ) {\r\n\r\n\t\t\t\t\t\tif ( instance.canPan() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToFit();\r\n\r\n\t\t\t\t\t\t} else if ( instance.isScaledDown() ) {\r\n\t\t\t\t\t\t\tinstance.scaleToActual( tapX, tapY );\r\n\r\n\t\t\t\t\t\t} else if ( instance.group.length < 2 ) {\r\n\t\t\t\t\t\t\tinstance.close( self.startEvent );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\t// Ignore right click\r\n\t\tif ( e.originalEvent && e.originalEvent.button == 2 ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if clicked on the scrollbar\r\n\t\tif ( tapX > $target[0].clientWidth + $target.offset().left ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check where is clicked\r\n\t\tif ( $target.is( '.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-container' ) ) {\r\n\t\t\twhere = 'Outside';\r\n\r\n\t\t} else if ( $target.is( '.fancybox-slide' ) ) {\r\n\t\t\twhere = 'Slide';\r\n\r\n\t\t} else if  ( instance.current.$content && instance.current.$content.has( e.target ).length ) {\r\n\t\t \twhere = 'Content';\r\n\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if this is a double tap\r\n\t\tif ( self.tapped ) {\r\n\r\n\t\t\t// Stop previously created single tap\r\n\t\t\tclearTimeout( self.tapped );\r\n\t\t\tself.tapped = null;\r\n\r\n\t\t\t// Skip if distance between taps is too big\r\n\t\t\tif ( Math.abs( tapX - self.tapX ) > 50 || Math.abs( tapY - self.tapY ) > 50 ) {\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\r\n\t\t\t// OK, now we assume that this is a double-tap\r\n\t\t\tprocess( 'dblclick' + where );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Single tap will be processed if user has not clicked second time within 300ms\r\n\t\t\t// or there is no need to wait for double-tap\r\n\t\t\tself.tapX = tapX;\r\n\t\t\tself.tapY = tapY;\r\n\r\n\t\t\tif ( current.opts[ 'dblclick' + where ] && current.opts[ 'dblclick' + where ] !== current.opts[ 'click' + where ] ) {\r\n\r\n\t\t\t\tself.tapped = setTimeout(function() {\r\n\t\t\t\t\tself.tapped = null;\r\n\r\n\t\t\t\t\tprocess( 'click' + where );\r\n\r\n\t\t\t\t}, 500);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocess( 'click' + where );\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t$(document).on('onActivate.fb', function (e, instance) {\r\n\t\tif ( instance && !instance.Guestures ) {\r\n\t\t\tinstance.Guestures = new Guestures( instance );\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on('beforeClose.fb', function (e, instance) {\r\n\t\tif ( instance && instance.Guestures ) {\r\n\t\t\tinstance.Guestures.destroy();\r\n\t\t}\r\n\t});\r\n\r\n\r\n}( window, document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// SlideShow\r\n// Enables slideshow functionality\r\n//\r\n// Example of usage:\r\n// $.fancybox.getInstance().SlideShow.start()\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tslideShow :\r\n\t\t\t\t'<button data-fancybox-play class=\"fancybox-button fancybox-button--play\" title=\"{{PLAY_START}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M13,12 L27,20 L13,27 Z\" />' +\r\n\t\t\t\t\t\t'<path d=\"M15,10 v19 M23,10 v19\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tslideShow : {\r\n\t\t\tautoStart : false,\r\n            speed     : 3000\r\n\t\t}\r\n\t});\r\n\r\n\tvar SlideShow = function( instance ) {\r\n\t\tthis.instance = instance;\r\n\t\tthis.init();\r\n\t};\r\n\r\n\t$.extend( SlideShow.prototype, {\r\n\t\ttimer    : null,\r\n\t\tisActive : false,\r\n\t\t$button  : null,\r\n\r\n\t\tinit : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.$button = self.instance.$refs.toolbar.find('[data-fancybox-play]').on('click', function() {\r\n\t\t\t\tself.toggle();\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.instance.group.length < 2 || !self.instance.group[ self.instance.currIndex ].opts.slideShow ) {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tset : function( force ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\t// Check if reached last element\r\n\t\t\tif ( self.instance && self.instance.current && (force === true || self.instance.current.opts.loop || self.instance.currIndex < self.instance.group.length - 1 )) {\r\n\t\t\t\tself.timer = setTimeout(function() {\r\n\t\t\t\t\tif ( self.isActive ) {\r\n\t\t\t\t\t\tself.instance.jumpTo( (self.instance.currIndex + 1) % self.instance.group.length );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, self.instance.current.opts.slideShow.speed);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.stop();\r\n\t\t\t\tself.instance.idleSecondsCounter = 0;\r\n\t\t\t\tself.instance.showControls();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclear : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tclearTimeout( self.timer );\r\n\r\n\t\t\tself.timer = null;\r\n\t\t},\r\n\r\n\t\tstart : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tif ( current ) {\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t\tself.$button\r\n\t\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_STOP )\r\n\t\t\t\t\t.removeClass( 'fancybox-button--play' )\r\n\t\t\t\t\t.addClass( 'fancybox-button--pause' );\r\n\r\n\t\t\t\t\tself.set( true );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tstop : function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar current = self.instance.current;\r\n\r\n\t\t\tself.clear();\r\n\r\n\t\t\tself.$button\r\n\t\t\t\t.attr( 'title', current.opts.i18n[ current.opts.lang ].PLAY_START )\r\n\t\t\t\t.removeClass( 'fancybox-button--pause' )\r\n\t\t\t\t.addClass( 'fancybox-button--play' );\r\n\r\n\t\t\tself.isActive = false;\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tif ( self.isActive ) {\r\n\t\t\t\tself.stop();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.start();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tif ( instance && !instance.SlideShow ) {\r\n\t\t\t\tinstance.SlideShow = new SlideShow( instance );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, current, firstRun) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( firstRun ) {\r\n\r\n\t\t\t\tif ( SlideShow && current.opts.slideShow.autoStart ) {\r\n\t\t\t\t\tSlideShow.start();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( SlideShow && SlideShow.isActive )  {\r\n\t\t\t\tSlideShow.clear();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterShow.fb' : function(e, instance, current) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( SlideShow && current.opts.slideShow && ( keycode === 80 || keycode === 32 ) && !$(document.activeElement).is( 'button,a,input' ) ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tSlideShow.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb onDeactivate.fb' : function(e, instance) {\r\n\t\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\t\tif ( SlideShow ) {\r\n\t\t\t\tSlideShow.stop();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Page Visibility API to pause slideshow when window is not active\r\n\t$(document).on(\"visibilitychange\", function() {\r\n\t\tvar instance  = $.fancybox.getInstance();\r\n\t\tvar SlideShow = instance && instance.SlideShow;\r\n\r\n\t\tif ( SlideShow && SlideShow.isActive ) {\r\n\t\t\tif ( document.hidden ) {\r\n\t\t\t\tSlideShow.clear();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSlideShow.set();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// FullScreen\r\n// Adds fullscreen functionality\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Collection of methods supported by user browser\r\n\tvar fn = (function () {\r\n\r\n\t\tvar fnMap = [\r\n\t\t\t[\r\n\t\t\t\t'requestFullscreen',\r\n\t\t\t\t'exitFullscreen',\r\n\t\t\t\t'fullscreenElement',\r\n\t\t\t\t'fullscreenEnabled',\r\n\t\t\t\t'fullscreenchange',\r\n\t\t\t\t'fullscreenerror'\r\n\t\t\t],\r\n\t\t\t// new WebKit\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullscreen',\r\n\t\t\t\t'webkitExitFullscreen',\r\n\t\t\t\t'webkitFullscreenElement',\r\n\t\t\t\t'webkitFullscreenEnabled',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t// old WebKit (Safari 5.1)\r\n\t\t\t[\r\n\t\t\t\t'webkitRequestFullScreen',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitCurrentFullScreenElement',\r\n\t\t\t\t'webkitCancelFullScreen',\r\n\t\t\t\t'webkitfullscreenchange',\r\n\t\t\t\t'webkitfullscreenerror'\r\n\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'mozRequestFullScreen',\r\n\t\t\t\t'mozCancelFullScreen',\r\n\t\t\t\t'mozFullScreenElement',\r\n\t\t\t\t'mozFullScreenEnabled',\r\n\t\t\t\t'mozfullscreenchange',\r\n\t\t\t\t'mozfullscreenerror'\r\n\t\t\t],\r\n\t\t\t[\r\n\t\t\t\t'msRequestFullscreen',\r\n\t\t\t\t'msExitFullscreen',\r\n\t\t\t\t'msFullscreenElement',\r\n\t\t\t\t'msFullscreenEnabled',\r\n\t\t\t\t'MSFullscreenChange',\r\n\t\t\t\t'MSFullscreenError'\r\n\t\t\t]\r\n\t\t];\r\n\r\n\t\tvar val;\r\n\t\tvar ret = {};\r\n\t\tvar i, j;\r\n\r\n\t\tfor ( i = 0; i < fnMap.length; i++ ) {\r\n\t\t\tval = fnMap[ i ];\r\n\r\n\t\t\tif ( val && val[ 1 ] in document ) {\r\n\t\t\t\tfor ( j = 0; j < val.length; j++ ) {\r\n\t\t\t\t\tret[ fnMap[ 0 ][ j ] ] = val[ j ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})();\r\n\r\n\t// If browser does not have Full Screen API, then simply unset default button template and stop\r\n\tif ( !fn ) {\r\n\r\n\t\tif ( $ && $.fancybox ) {\r\n\t\t\t$.fancybox.defaults.btnTpl.fullScreen = false;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar FullScreen = {\r\n\r\n\t\trequest : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\telem[ fn.requestFullscreen ]( elem.ALLOW_KEYBOARD_INPUT );\r\n\r\n\t\t},\r\n\t\texit : function () {\r\n\r\n\t\t\tdocument[ fn.exitFullscreen ]();\r\n\r\n\t\t},\r\n\t\ttoggle : function ( elem ) {\r\n\r\n\t\t\telem = elem || document.documentElement;\r\n\r\n\t\t\tif ( this.isFullscreen() ) {\r\n\t\t\t\tthis.exit();\r\n\r\n\t\t\t} else {\r\n\t\t\t\tthis.request( elem );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tisFullscreen : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenElement ] );\r\n\r\n\t\t},\r\n\t\tenabled : function()  {\r\n\r\n\t\t\treturn Boolean( document[ fn.fullscreenEnabled ] );\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tfullScreen :\r\n\t\t\t\t'<button data-fancybox-fullscreen class=\"fancybox-button fancybox-button--fullscreen\" title=\"{{FULL_SCREEN}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M9,12 h22 v16 h-22 v-16 v16 h22 v-16 Z\" />' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tfullScreen : {\r\n\t\t\tautoStart : false\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar $container;\r\n\r\n\t\t\tif ( instance && instance.group[ instance.currIndex ].opts.fullScreen ) {\r\n\t\t\t\t$container = instance.$refs.container;\r\n\r\n\t\t\t\t$container.on('click.fb-fullscreen', '[data-fancybox-fullscreen]', function(e) {\r\n\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tFullScreen.toggle( $container[ 0 ] );\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ( instance.opts.fullScreen && instance.opts.fullScreen.autoStart === true ) {\r\n\t\t\t\t\tFullScreen.request( $container[ 0 ] );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Expose API\r\n\t\t\t\tinstance.FullScreen = FullScreen;\r\n\r\n\t\t\t} else if ( instance ) {\r\n\t\t\t\tinstance.$refs.toolbar.find('[data-fancybox-fullscreen]').hide();\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\r\n\t\t\t// \"P\" or Spacebar\r\n\t\t\tif ( instance && instance.FullScreen && keycode === 70 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tinstance.FullScreen.toggle( instance.$refs.container[ 0 ] );\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( instance ) {\r\n\t\t\tif ( instance && instance.FullScreen ) {\r\n\t\t\t\tFullScreen.exit();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on(fn.fullscreenchange, function() {\r\n\t\tvar isFullscreen = FullScreen.isFullscreen(),\r\n\t\t\tinstance = $.fancybox.getInstance();\r\n\r\n\t\tif ( instance ) {\r\n\r\n\t\t\t// If image is zooming, then force to stop and reposition properly\r\n\t\t\tif ( instance.current && instance.current.type === 'image' && instance.isAnimating ) {\r\n\t\t\t\tinstance.current.$content.css( 'transition', 'none' );\r\n\r\n\t\t\t\tinstance.isAnimating = false;\r\n\r\n\t\t\t\tinstance.update( true, true, 0 );\r\n\t\t\t}\r\n\r\n\t\t\tinstance.trigger( 'onFullscreenChange', isFullscreen );\r\n\r\n\t\t\tinstance.$refs.container.toggleClass( 'fancybox-is-fullscreen', isFullscreen );\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Thumbs\r\n// Displays thumbnails in a grid\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t// Make sure there are default values\r\n\t$.fancybox.defaults = $.extend(true, {\r\n\t\tbtnTpl : {\r\n\t\t\tthumbs :\r\n\t\t\t'<button data-fancybox-thumbs class=\"fancybox-button fancybox-button--thumbs\" title=\"{{THUMBS}}\">' +\r\n\t\t\t\t'<svg viewBox=\"0 0 120 120\">' +\r\n\t\t\t\t\t'<path d=\"M30,30 h14 v14 h-14 Z M50,30 h14 v14 h-14 Z M70,30 h14 v14 h-14 Z M30,50 h14 v14 h-14 Z M50,50 h14 v14 h-14 Z M70,50 h14 v14 h-14 Z M30,70 h14 v14 h-14 Z M50,70 h14 v14 h-14 Z M70,70 h14 v14 h-14 Z\" />' +\r\n\t\t\t\t'</svg>' +\r\n\t\t\t'</button>'\r\n\t\t},\r\n\t\tthumbs : {\r\n\t\t\tautoStart   : false,                  // Display thumbnails on opening\r\n\t\t\thideOnClose : true,                   // Hide thumbnail grid when closing animation starts\r\n\t\t\tparentEl    : '.fancybox-container',  // Container is injected into this element\r\n\t\t\taxis        : 'y'                     // Vertical (y) or horizontal (x) scrolling\r\n\t\t}\r\n\t}, $.fancybox.defaults);\r\n\r\n\tvar FancyThumbs = function( instance ) {\r\n\t\tthis.init( instance );\r\n\t};\r\n\r\n\t$.extend( FancyThumbs.prototype, {\r\n\r\n\t\t$button\t\t: null,\r\n\t\t$grid\t\t: null,\r\n\t\t$list\t\t: null,\r\n\t\tisVisible\t: false,\r\n\t\tisActive\t: false,\r\n\r\n\t\tinit : function( instance ) {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tself.instance = instance;\r\n\r\n\t\t\tinstance.Thumbs = self;\r\n\r\n\t\t\t// Enable thumbs if at least two group items have thumbnails\r\n\t\t\tvar first  = instance.group[0],\r\n\t\t\t\tsecond = instance.group[1];\r\n\r\n\t\t\tself.opts = instance.group[ instance.currIndex ].opts.thumbs;\r\n\r\n\t\t\tself.$button = instance.$refs.toolbar.find( '[data-fancybox-thumbs]' );\r\n\r\n\t\t\tif ( self.opts && first && second && (\r\n\t\t    \t\t( first.type == 'image'  || first.opts.thumb  || first.opts.$thumb ) &&\r\n\t\t    \t\t( second.type == 'image' || second.opts.thumb || second.opts.$thumb )\r\n\t\t\t)) {\r\n\r\n\t\t\t\tself.$button.show().on('click', function() {\r\n\t\t\t\t\tself.toggle();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tself.isActive = true;\r\n\r\n\t\t\t} else {\r\n\t\t\t\tself.$button.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcreate : function() {\r\n\t\t\tvar self = this,\r\n\t\t\t\tinstance = self.instance,\r\n\t\t\t\tparentEl = self.opts.parentEl,\r\n\t\t\t\tlist,\r\n\t\t\t\tsrc;\r\n\r\n\t\t\tself.$grid = $('<div class=\"fancybox-thumbs fancybox-thumbs-' + self.opts.axis + '\"></div>').appendTo( instance.$refs.container.find( parentEl ).addBack().filter( parentEl ) );\r\n\r\n\t\t\t// Build list HTML\r\n\t\t\tlist = '<ul>';\r\n\r\n\t\t\t$.each(instance.group, function( i, item ) {\r\n\t\t\t\tsrc = item.opts.thumb || ( item.opts.$thumb ? item.opts.$thumb.attr( 'src' ) : null );\r\n\r\n\t\t\t\tif ( !src && item.type === 'image' ) {\r\n\t\t\t\t\tsrc = item.src;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( src && src.length ) {\r\n\t\t\t\t\tlist += '<li data-index=\"' + i + '\"  tabindex=\"0\" class=\"fancybox-thumbs-loading\"><img data-src=\"' + src + '\" /></li>';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tlist += '</ul>';\r\n\r\n\t\t\tself.$list = $( list ).appendTo( self.$grid ).on('click', 'li', function() {\r\n\t\t\t\tinstance.jumpTo( $(this).data('index') );\r\n\t\t\t});\r\n\r\n\t\t\tself.$list.find( 'img' ).hide().one('load', function() {\r\n\t\t\t\tvar $parent\t\t= $(this).parent().removeClass( 'fancybox-thumbs-loading' ),\r\n\t\t\t\t\tthumbWidth\t= $parent.outerWidth(),\r\n\t\t\t\t\tthumbHeight\t= $parent.outerHeight(),\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\twidthRatio,\r\n\t\t\t\t\theightRatio;\r\n\r\n\t\t\t\twidth  = this.naturalWidth\t|| this.width;\r\n\t\t\t\theight = this.naturalHeight\t|| this.height;\r\n\r\n\t\t\t\t// Calculate thumbnail dimensions; center vertically and horizontally\r\n\t\t\t\twidthRatio  = width  / thumbWidth;\r\n\t\t\t\theightRatio = height / thumbHeight;\r\n\r\n\t\t\t\tif (widthRatio >= 1 && heightRatio >= 1) {\r\n\t\t\t\t\tif (widthRatio > heightRatio) {\r\n\t\t\t\t\t\twidth  = width / heightRatio;\r\n\t\t\t\t\t\theight = thumbHeight;\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twidth  = thumbWidth;\r\n\t\t\t\t\t\theight = height / widthRatio;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).css({\r\n\t\t\t\t\twidth         : Math.floor(width),\r\n\t\t\t\t\theight        : Math.floor(height),\r\n\t\t\t\t\t'margin-top'  : height > thumbHeight ? ( Math.floor(thumbHeight * 0.3 - height * 0.3 ) ) : Math.floor(thumbHeight * 0.5 - height * 0.5 ),\r\n\t\t\t\t\t'margin-left' : Math.floor(thumbWidth * 0.5 - width * 0.5 )\r\n\t\t\t\t}).show();\r\n\r\n\t\t\t})\r\n\t\t\t.each(function() {\r\n\t\t\t\tthis.src = $( this ).data( 'src' );\r\n\t\t\t});\r\n\r\n\t\t\tif ( self.opts.axis === 'x' ) {\r\n\t\t\t\tself.$list.width( parseInt( self.$grid.css(\"padding-right\") ) + ( instance.group.length * self.$list.children().eq(0).outerWidth(true) ) + 'px' );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfocus : function( duration ) {\r\n\t\t\tvar self = this,\r\n\t\t\t\t$list = self.$list,\r\n\t\t\t\tthumb,\r\n\t\t\t\tthumbPos;\r\n\r\n\t\t\tif ( self.instance.current ) {\r\n\t\t\t\tthumb = $list.children()\r\n\t\t\t\t\t.removeClass( 'fancybox-thumbs-active' )\r\n\t\t\t\t\t.filter('[data-index=\"' + self.instance.current.index  + '\"]')\r\n\t\t\t\t\t.addClass('fancybox-thumbs-active');\r\n\r\n\t\t\t\tthumbPos = thumb.position();\r\n\r\n\t\t\t\t// Check if need to scroll to make current thumb visible\r\n\t\t\t\tif ( self.opts.axis === 'y' && ( thumbPos.top < 0 || thumbPos.top > ( $list.height() - thumb.outerHeight() ) ) ) {\r\n\t\t\t\t\t$list.stop().animate({ 'scrollTop' : $list.scrollTop() + thumbPos.top }, duration);\r\n\r\n\t\t\t\t} else if ( self.opts.axis === 'x' && (\r\n\t\t\t\t\t\tthumbPos.left < $list.parent().scrollLeft() ||\r\n\t\t\t\t\t\tthumbPos.left > ( $list.parent().scrollLeft() + ( $list.parent().width() - thumb.outerWidth() ) )\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\t$list.parent().stop().animate({ 'scrollLeft' : thumbPos.left }, duration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdate : function() {\r\n\t\t\tthis.instance.$refs.container.toggleClass( 'fancybox-show-thumbs', this.isVisible );\r\n\r\n\t\t\tif ( this.isVisible ) {\r\n\t\t\t\tif ( !this.$grid ) {\r\n\t\t\t\t\tthis.create();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.instance.trigger( 'onThumbsShow' );\r\n\r\n\t\t\t\tthis.focus( 0 );\r\n\r\n\t\t\t} else if ( this.$grid ) {\r\n\t\t\t\tthis.instance.trigger( 'onThumbsHide' );\r\n\t\t\t}\r\n\r\n\t\t\t// Update content position\r\n\t\t\tthis.instance.update();\r\n\t\t},\r\n\r\n\t\thide : function() {\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tshow : function() {\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\ttoggle : function() {\r\n\t\t\tthis.isVisible = !this.isVisible;\r\n\t\t\tthis.update();\r\n\t\t}\r\n\t});\r\n\r\n\t$(document).on({\r\n\r\n\t\t'onInit.fb' : function(e, instance) {\r\n\t\t\tvar Thumbs;\r\n\r\n\t\t\tif ( instance && !instance.Thumbs ) {\r\n\t\t\t\tThumbs = new FancyThumbs( instance );\r\n\r\n\t\t\t\tif ( Thumbs.isActive && Thumbs.opts.autoStart === true ) {\r\n\t\t\t\t\tThumbs.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeShow.fb' : function(e, instance, item, firstRun) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible ) {\r\n\t\t\t\tThumbs.focus( firstRun ? 0 : 250 );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'afterKeydown.fb' : function(e, instance, current, keypress, keycode) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\t// \"G\"\r\n\t\t\tif ( Thumbs && Thumbs.isActive && keycode === 71 ) {\r\n\t\t\t\tkeypress.preventDefault();\r\n\r\n\t\t\t\tThumbs.toggle();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t'beforeClose.fb' : function( e, instance ) {\r\n\t\t\tvar Thumbs = instance && instance.Thumbs;\r\n\r\n\t\t\tif ( Thumbs && Thumbs.isVisible && Thumbs.opts.hideOnClose !== false ) {\r\n\t\t\t\tThumbs.$grid.hide();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n}(document, window.jQuery));\r\n\r\n//// ==========================================================================\r\n//\r\n// Share\r\n// Displays simple form for sharing current url\r\n//\r\n// ==========================================================================\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\t$.extend(true, $.fancybox.defaults, {\r\n\t\tbtnTpl : {\r\n\t\t\tshare :\r\n\t\t\t\t'<button data-fancybox-share class=\"fancybox-button fancybox-button--share\" title=\"{{SHARE}}\">' +\r\n\t\t\t\t\t'<svg viewBox=\"0 0 40 40\">' +\r\n\t\t\t\t\t\t'<path d=\"M6,30 C8,18 19,16 23,16 L23,16 L23,10 L33,20 L23,29 L23,24 C19,24 8,27 6,30 Z\">' +\r\n\t\t\t\t\t'</svg>' +\r\n\t\t\t\t'</button>'\r\n\t\t},\r\n\t\tshare : {\r\n\t\t\ttpl :\r\n\t\t\t\t'<div class=\"fancybox-share\">' +\r\n\t\t\t\t\t'<h1>{{SHARE}}</h1>' +\r\n\t\t\t\t\t'<p>' +\r\n\t\t\t\t\t\t'<a href=\"https://www.facebook.com/sharer/sharer.php?u={{src}}\" target=\"_blank\" class=\"fancybox-share_button\">' +\r\n\t\t\t\t\t\t\t'<svg version=\"1.1\" viewBox=\"0 0 32 32\" fill=\"#3b5998\"><path d=\"M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z\"></path></svg>' +\r\n\t\t\t\t\t\t\t'<span>Facebook</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a href=\"https://www.pinterest.com/pin/create/button/?url={{src}}&amp;description={{descr}}\" target=\"_blank\" class=\"fancybox-share_button\">' +\r\n\t\t\t\t\t\t\t'<svg version=\"1.1\" viewBox=\"0 0 32 32\" fill=\"#c92228\"><path d=\"M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z\"></path></svg>' +\r\n\t\t\t\t\t\t\t'<span>Pinterest</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t'<a href=\"https://twitter.com/intent/tweet?url={{src}}&amp;text={{descr}}\" target=\"_blank\" class=\"fancybox-share_button\">' +\r\n\t\t\t\t\t\t\t'<svg version=\"1.1\" viewBox=\"0 0 32 32\" fill=\"#1da1f2\"><path d=\"M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z\"></path></svg>' +\r\n\t\t\t\t\t\t\t'<span>Twitter</span>' +\r\n\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t'</p>' +\r\n\t\t\t\t\t'<p><input type=\"text\" value=\"{{src_raw}}\" onfocus=\"this.select()\" /></p>' +\r\n\t\t\t\t'</div>'\r\n\t\t}\r\n\t});\r\n\r\n\tfunction escapeHtml(string) {\r\n\t\tvar entityMap = {\r\n\t\t  '&': '&amp;',\r\n\t\t  '<': '&lt;',\r\n\t\t  '>': '&gt;',\r\n\t\t  '\"': '&quot;',\r\n\t\t  \"'\": '&#39;',\r\n\t\t  '/': '&#x2F;',\r\n\t\t  '`': '&#x60;',\r\n\t\t  '=': '&#x3D;'\r\n\t\t};\r\n\r\n\t\treturn String(string).replace(/[&<>\"'`=\\/]/g, function (s) {\r\n\t\t\treturn entityMap[s];\r\n\t\t});\r\n\t}\r\n\r\n\t$(document).on('click', '[data-fancybox-share]', function() {\r\n\t\tvar f = $.fancybox.getInstance(),\r\n\t\t\turl,\r\n\t\t\ttpl;\r\n\r\n\t\tif ( f ) {\r\n\t\t\turl = f.current.opts.hash === false ? f.current.src : window.location;\r\n\t\t\ttpl = f.current.opts.share.tpl\r\n\t\t\t\t\t.replace( /\\{\\{src\\}\\}/g, encodeURIComponent( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{src_raw\\}\\}/g, escapeHtml( url ) )\r\n\t\t\t\t\t.replace( /\\{\\{descr\\}\\}/g, f.$caption ? encodeURIComponent( f.$caption.text() ) : '' );\r\n\r\n\t\t\t$.fancybox.open({\r\n\t\t\t\tsrc  : f.translate( f, tpl ),\r\n\t\t\t\ttype : 'html',\r\n\t\t\t\topts : {\r\n\t\t\t\t\tanimationEffect   : \"fade\",\r\n\t\t\t\t\tanimationDuration : 250\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t});\r\n\r\n}( document, window.jQuery || jQuery ));\r\n\r\n// ==========================================================================\r\n//\r\n// Hash\r\n// Enables linking to each modal\r\n//\r\n// ==========================================================================\r\n;(function (document, window, $) {\r\n\t'use strict';\r\n\r\n\t// Simple $.escapeSelector polyfill (for jQuery prior v3)\r\n\tif ( !$.escapeSelector ) {\r\n\t\t$.escapeSelector = function( sel ) {\r\n\t\t\tvar rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g;\r\n\t\t\tvar fcssescape = function( ch, asCodePoint ) {\r\n\t\t\t\tif ( asCodePoint ) {\r\n\t\t\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n\t\t\t\t\tif ( ch === \"\\0\" ) {\r\n\t\t\t\t\t\treturn \"\\uFFFD\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\r\n\t\t\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Other potentially-special ASCII characters get backslash-escaped\r\n\t\t\t\treturn \"\\\\\" + ch;\r\n\t\t\t};\r\n\r\n\t\t\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\r\n\t\t};\r\n\t}\r\n\r\n\t// Create new history entry only once\r\n\tvar shouldCreateHistory = true;\r\n\r\n\t// Variable containing last hash value set by fancyBox\r\n\t// It will be used to determine if fancyBox needs to close after hash change is detected\r\n    var currentHash = null;\r\n\r\n\t// Throttling the history change\r\n\tvar timerID = null;\r\n\r\n\t// Get info about gallery name and current index from url\r\n    function parseUrl() {\r\n        var hash    = window.location.hash.substr( 1 );\r\n        var rez     = hash.split( '-' );\r\n        var index   = rez.length > 1 && /^\\+?\\d+$/.test( rez[ rez.length - 1 ] ) ? parseInt( rez.pop( -1 ), 10 ) || 1 : 1;\r\n        var gallery = rez.join( '-' );\r\n\r\n\t\t// Index is starting from 1\r\n\t\tif ( index < 1 ) {\r\n\t\t\tindex = 1;\r\n\t\t}\r\n\r\n        return {\r\n            hash    : hash,\r\n            index   : index,\r\n            gallery : gallery\r\n        };\r\n    }\r\n\r\n\t// Trigger click evnt on links to open new fancyBox instance\r\n\tfunction triggerFromUrl( url ) {\r\n\t\tvar $el;\r\n\r\n        if ( url.gallery !== '' ) {\r\n\r\n\t\t\t// If we can find element matching 'data-fancybox' atribute, then trigger click event for that ..\r\n\t\t\t$el = $( \"[data-fancybox='\" + $.escapeSelector( url.gallery ) + \"']\" ).eq( url.index - 1 );\r\n\r\n            if ( !$el.length ) {\r\n\t\t\t\t// .. if not, try finding element by ID\r\n\t\t\t\t$el = $( \"#\" + $.escapeSelector( url.gallery ) + \"\" );\r\n\t\t\t}\r\n\r\n\t\t\tif ( $el.length ) {\r\n\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t$el.trigger( 'click' );\r\n\t\t\t}\r\n\r\n        }\r\n\t}\r\n\r\n\t// Get gallery name from current instance\r\n\tfunction getGalleryID( instance ) {\r\n\t\tvar opts;\r\n\r\n\t\tif ( !instance ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\topts = instance.current ? instance.current.opts : instance.opts;\r\n\r\n\t\treturn opts.hash || ( opts.$orig ? opts.$orig.data( 'fancybox' ) : ''  );\r\n\t}\r\n\r\n\t// Start when DOM becomes ready\r\n    $(function() {\r\n\r\n\t\t// Check if user has disabled this module\r\n\t\tif ( $.fancybox.defaults.hash === false ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update hash when opening/closing fancyBox\r\n\t    $(document).on({\r\n\t\t\t'onInit.fb' : function( e, instance ) {\r\n\t\t\t\tvar url, gallery;\r\n\r\n\t\t\t\tif ( instance.group[ instance.currIndex ].opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\turl     = parseUrl();\r\n\t\t\t\tgallery = getGalleryID( instance );\r\n\r\n\t\t\t\t// Make sure gallery start index matches index from hash\r\n\t\t\t\tif ( gallery && url.gallery && gallery == url.gallery ) {\r\n\t\t\t\t\tinstance.currIndex = url.index - 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'beforeShow.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery;\r\n\r\n\t\t\t\tif ( !current || current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t            gallery = getGalleryID( instance );\r\n\r\n\t            // Update window hash\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t\t\t\t\tif ( window.location.hash.indexOf( gallery ) < 0 ) {\r\n\t\t                instance.opts.origHash = window.location.hash;\r\n\t\t            }\r\n\r\n\t\t\t\t\tcurrentHash = gallery + ( instance.group.length > 1 ? '-' + ( current.index + 1 ) : '' );\r\n\r\n\t\t\t\t\tif ( 'replaceState' in window.history ) {\r\n\t\t\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttimerID = setTimeout(function() {\r\n\t\t\t\t\t\t\twindow.history[ shouldCreateHistory ? 'pushState' : 'replaceState' ]( {} , document.title, window.location.pathname + window.location.search + '#' +  currentHash );\r\n\r\n\t\t\t\t\t\t\ttimerID = null;\r\n\r\n\t\t\t\t\t\t\tshouldCreateHistory = false;\r\n\r\n\t\t\t\t\t\t}, 300);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\twindow.location.hash = currentHash;\r\n\t\t\t\t\t}\r\n\r\n\t            }\r\n\r\n\t        },\r\n\r\n\t\t\t'beforeClose.fb' : function( e, instance, current ) {\r\n\t\t\t\tvar gallery, origHash;\r\n\r\n\t\t\t\tif ( timerID ) {\r\n\t\t\t\t\tclearTimeout( timerID );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.opts.hash === false ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgallery  = getGalleryID( instance );\r\n\t\t\t\torigHash = instance && instance.opts.origHash ? instance.opts.origHash : '';\r\n\r\n\t            // Remove hash from location bar\r\n\t            if ( gallery && gallery !== '' ) {\r\n\r\n\t                if ( 'replaceState' in history ) {\r\n\t\t\t\t\t\twindow.history.replaceState( {} , document.title, window.location.pathname + window.location.search + origHash );\r\n\r\n\t                } else {\r\n\t\t\t\t\t\twindow.location.hash = origHash;\r\n\r\n\t\t\t\t\t\t// Keep original scroll position\r\n\t\t\t\t\t\t$( window ).scrollTop( instance.scrollTop ).scrollLeft( instance.scrollLeft );\r\n\t                }\r\n\t            }\r\n\r\n\t\t\t\tcurrentHash = null;\r\n\t        }\r\n\t    });\r\n\r\n\t\t// Check if need to close after url has changed\r\n\t\t$(window).on('hashchange.fb', function() {\r\n\t\t\tvar url = parseUrl();\r\n\r\n\t\t\tif ( $.fancybox.getInstance() ) {\r\n\t\t\t\tif ( currentHash && currentHash !== url.gallery + '-' + url.index && !( url.index === 1 && currentHash == url.gallery ) ) {\r\n\t\t\t\t\tcurrentHash = null;\r\n\r\n\t\t\t\t\t$.fancybox.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( url.gallery !== '' ) {\r\n\t\t\t\ttriggerFromUrl( url );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Check current hash and trigger click event on matching element to start fancyBox, if needed\r\n\t\tsetTimeout(function() {\r\n\t\t\ttriggerFromUrl( parseUrl() );\r\n\t\t}, 50);\r\n    });\r\n\r\n}( document, window, window.jQuery || jQuery ));\r\n\r\n;(function (document, $) {\r\n\t'use strict';\r\n\r\n\tvar prevTime = new Date().getTime();\r\n\r\n    $(document).on({\r\n        'onInit.fb' : function( e, instance, current ) {\r\n\t\t\tinstance.$refs.stage.on('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e) {\r\n\t\t\t\tvar current = instance.current,\r\n\t\t\t\t\tcurrTime,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tdelta,\r\n\t\t\t\t\tisHorizontal,\r\n\t\t\t\t\tisVertical;\r\n\r\n\t\t\t\tif ( current.opts.wheel === false || ( current.opts.wheel === 'auto' && current.type !== 'image' ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( current.$slide.hasClass( 'fancybox-animated' ) ) {\r\n\t\t\t\t    return;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( instance.group.length < 1 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\te = e.originalEvent || e;\r\n\r\n\t\t\t\tif ( currTime - prevTime < 250 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tprevTime = currTime;\r\n\r\n\t\t\t\tvalue = e.wheelDelta || -e.deltaY || -e.detail;\r\n\t\t\t\tdelta = Math.max(-1, Math.min(1, value));\r\n\r\n\t\t\t\tisHorizontal = typeof e.wheelDeltaX !== 'undefined' || typeof e.deltaX !== 'undefined';\r\n\t\t\t\tisVertical   = !isHorizontal || ( (Math.abs(e.wheelDeltaX) < Math.abs(e.wheelDelta)) || (Math.abs(e.deltaX) < Math.abs(e.deltaY)) );\r\n\r\n\t\t\t\tif ( delta < 0 ) {\r\n\t\t\t\t\tinstance[ isVertical ? 'previous' : 'next' ]();\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinstance[ isVertical ? 'next' : 'previous' ]();\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n    });\r\n\r\n}( document, window.jQuery || jQuery ));","/*! Lazy Load 1.9.7 - MIT license - Copyright 2010-2015 Mika Tuupola */\r\n!function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(\":visible\"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger(\"appear\"),b=0})}var h,i=this,j={threshold:0,failure_limit:0,event:\"scroll\",effect:\"show\",container:b,data_attribute:\"original\",skip_invisible:!1,appear:null,load:null,placeholder:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC\"};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf(\"scroll\")&&h.bind(j.event,function(){return g()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,(c.attr(\"src\")===d||c.attr(\"src\")===!1)&&c.is(\"img\")&&c.attr(\"src\",j.placeholder),c.one(\"appear\",function(){if(!this.loaded){if(j.appear){var d=i.length;j.appear.call(b,d,j)}a(\"<img />\").bind(\"load\",function(){var d=c.attr(\"data-\"+j.data_attribute);c.hide(),c.is(\"img\")?c.attr(\"src\",d):c.css(\"background-image\",\"url('\"+d+\"')\"),c[j.effect](j.effect_speed),b.loaded=!0;var e=a.grep(i,function(a){return!a.loaded});if(i=a(e),j.load){var f=i.length;j.load.call(b,f,j)}}).attr(\"src\",c.attr(\"data-\"+j.data_attribute))}}),0!==j.event.indexOf(\"scroll\")&&c.bind(j.event,function(){b.loaded||c.trigger(\"appear\")})}),e.bind(\"resize\",function(){g()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind(\"pageshow\",function(b){b.originalEvent&&b.originalEvent.persisted&&i.each(function(){a(this).trigger(\"appear\")})}),a(c).ready(function(){g()}),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?(b.innerHeight?b.innerHeight:e.height())+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[\":\"],{\"below-the-fold\":function(b){return a.belowthefold(b,{threshold:0})},\"above-the-top\":function(b){return!a.belowthefold(b,{threshold:0})},\"right-of-screen\":function(b){return a.rightoffold(b,{threshold:0})},\"left-of-screen\":function(b){return!a.rightoffold(b,{threshold:0})},\"in-viewport\":function(b){return a.inviewport(b,{threshold:0})},\"above-the-fold\":function(b){return!a.belowthefold(b,{threshold:0})},\"right-of-fold\":function(b){return a.rightoffold(b,{threshold:0})},\"left-of-fold\":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);"]}